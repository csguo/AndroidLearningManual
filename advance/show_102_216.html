
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML xmlns="http://www.w3.org/1999/xhtml">
<HEAD>
<TITLE>Android中View绘制优化二 使用include 标签复用布局文件_Android学习手册</TITLE>
<META content="text/html; charset=gb2312" http-equiv=Content-Type><LINK  rel=stylesheet type=text/css href="../css/c5.css">
<META name=GENERATOR content="MSHTML 8.00.6001.18702">
<meta name="Description" content=Android基础 Android组件 Android用户界面 Android设备功能 Android数据存储 Android网络应用 Android游戏开发 Android多媒体 Android源码开发 Android高级进阶 Android面试题/>
<meta name="Keywords" content="android 学习手册">

</HEAD>
<BODY id=homesecond class=serverscripting>
<DIV id=wrapper>
<DIV id=header><h1><a href="../index.html">Android学习手册</a></h1> 
</DIV>

<DIV id=navfirst>
<div id="indexGuide"><UL><li ><A href="../basic/index.html">Android基础</A> </li><li ><A href="../component/index.html">Android组件</A> </li><li ><A href="../userinterface/index.html">用户界面</A> </li><li ><A href="../device/index.html">设备功能</A> </li><li ><A href="../datastorage/index.html">数据存储</A> </li><li ><A href="../network/index.html">网络应用</A> </li><li ><A href="../game/index.html">游戏开发</A> </li><li ><A href="../multimedia/index.html">多媒体</A> </li><li ><A href="../source/index.html">源码开发</A> </li><li class="navcurrentLink"><A href="index.html">高级进阶</A> </li><li ><A href="../interview/index.html">Android面试题</A> </li></UL></div>
</DIV>
<DIV id=navsecond>
<DIV id=course>
<div id="kcTitle">课 程 表</div>


  <h2><A title="Android基础之运行原理和机制" href="index_215.html">Android基础之运行原理和机制</A></h2>

  <h2><A title="Android高级篇之Android优化" href="index_216.html">Android高级篇之Android优化</A></h2>
<UL><li ><A title=Android中View绘制优化之一 优化布局层次 href="show_101_216.html">Android中View绘制优化之一 优化布局层次</A> </li><li class="currentLink"><A title=Android中View绘制优化二 使用include 标签复用布局文件 href="show_102_216.html">Android中View绘制优化二 使用include 标签复用布局文件</A> </li><li ><A title=Android中View绘制优化之三 优化View href="show_103_216.html">Android中View绘制优化之三 优化View</A> </li><li ><A title=Android FrameLayou和布局优化（一） href="show_104_216.html">Android FrameLayou和布局优化（一）</A> </li><li ><A title=Android FrameLayou和布局优化（二） href="show_105_216.html">Android FrameLayou和布局优化（二）</A> </li><li ><A title=Android GridView视图缓存优化（一） href="show_106_216.html">Android GridView视图缓存优化（一）</A> </li><li ><A title=Android GridView视图缓存优化（二） href="show_107_216.html">Android GridView视图缓存优化（二）</A> </li><li ><A title=Android布局优化的要点 href="show_108_216.html">Android布局优化的要点</A> </li><li ><A title=Android 适配器（Adapter）优化 href="show_109_216.html">Android 适配器（Adapter）优化</A> </li><li ><A title=Android UI 优化 href="show_110_216.html">Android UI 优化</A> </li><li ><A title=Android 你的OnTouchEvent() 触屏事件的优化了吗 href="show_111_216.html">Android 你的OnTouchEvent() 触屏事件的优化了吗</A> </li><li ><A title=Android SQLite的查询优化（一） href="show_112_216.html">Android SQLite的查询优化（一）</A> </li><li ><A title=Android SQLite的查询优化（二） href="show_113_216.html">Android SQLite的查询优化（二）</A> </li><li ><A title=Android SQLite的查询优化（三） href="show_114_216.html">Android SQLite的查询优化（三）</A> </li><li ><A title=Android程序运行性能优化 href="show_115_216.html">Android程序运行性能优化</A> </li><li ><A title=Android代码性能优化技巧 href="show_116_216.html">Android代码性能优化技巧</A> </li><li ><A title=Android进程管理机制及优化 href="show_117_216.html">Android进程管理机制及优化</A> </li><li ><A title=Android应用开发者指南：性能优化 href="show_118_216.html">Android应用开发者指南：性能优化</A> </li><li ><A title=如何优化java代码 href="show_119_216.html">如何优化java代码</A> </li><li ><A title=Android Dalvik检查和优化.apk.jar的流程introduce href="show_120_216.html">Android Dalvik检查和优化.apk.jar的流程introduce</A> </li><li ><A title=ProGuard支持哪些种类的优化 href="show_121_216.html">ProGuard支持哪些种类的优化</A> </li><li ><A title=Android和大家分享几个重要的代码（一） href="show_122_216.html">Android和大家分享几个重要的代码（一）</A> </li><li ><A title=Android和大家分享几个重要的代码（二） href="show_123_216.html">Android和大家分享几个重要的代码（二）</A> </li></UL>
  <h2><A title="Android高级篇之编译及反编译" href="index_217.html">Android高级篇之编译及反编译</A></h2>

  <h2><A title="Android高级篇之加密解密" href="index_218.html">Android高级篇之加密解密</A></h2>

  <h2><A title="Android高级篇之Android 安全" href="index_219.html">Android高级篇之Android 安全</A></h2>

  <h2><A title="Android高级篇之算法" href="index_220.html">Android高级篇之算法</A></h2>

  <h2><A title="Android高级篇之解锁教程" href="index_221.html">Android高级篇之解锁教程</A></h2>

</DIV></DIV>
<DIV id=maincontent>
<DIV id=w3school>
<H1></H1>
<P><STRONG></STRONG></P></DIV>

<DIV>
<H2>Android中View绘制优化二 使用include 标签复用布局文件</H2>
<div style="line-height:20px; font-size:14px;"><p style="color:#3333FF;">使用标签复用布局文件</p><p>尽管Android通过内置了各种各样的控件提供了微小、可复用的交互性元素，也许你需要复用较大的组件 ---- 某些特定布局文件 。为了更有效率复用的布局文件，你可以使用以及标签将其他的布局文件加入到当前的布局文件中。</p><p>复用布局文件是一种特别强大的方法，它允许你创建可复用性的布局文件。例如，一个包含“Yse”or“No”的Button面版，或者是带有文字说明的Progressbar。复用布局文件同样意味着你应用程序里的任何元素都能从繁杂的布局文件提取出来进行单独管理，接着你需要做的只是加入这些独立的布局文件(因为他们都是可复用地)。因此，当你通过自定义View创建独立的UI组件时，你可以复用布局文件让事情变得更简单。</p><p style="color:#3333FF;">1、创建一个可复用性的布局文件</p><p>如果你已经知道复用布局的”面貌”，那么创建、定义布局文件( 命名以”.xml”为后缀)。例如，这里是一个来自G-Kenya codelab的布局文件，定义了在每个Activity中都要使用的一个自定义标题(titlebar.xml):由于这些可复用性布局被添加至其他布局文件中，因此，它的每个根视图(root View)最好是精确(exactly)的。</p><p><pre>&lt;FrameLayout xmlns:android=<font class="Fields">"http:<font class="Comments">//schemas.android.com/apk/res/android"</font></font></p><p>    </font>android:layout_width=<font class="Fields">"match_parent"</font></p><p>    </font>android:layout_height=<font class="Fields">"wrap_content"</font></p><p>    </font>android:background=<font class="Fields">"@color/titlebar_bg"</font> &gt;</p><p>    &lt;ImageView</p><p>        </font>android:layout_width=<font class="Fields">"wrap_content"</font></p><p>        </font>android:layout_height=<font class="Fields">"wrap_content"</font></p><p>        </font>android:src=<font class="Fields">"@drawable/gafricalogo"</font> /&gt;</p><p>&lt;/FrameLayout&gt;</p><p></pre></p><p style="color:#3333FF;">2、使用标签</p><p>在需要添加这些布局的地方，使用标签。例如，下面是一个来自G-Kenya codelab的布局文件，它复用了上面列出的“title bar”文件， 该布局文件如下：</p><p><pre>&lt;LinearLayout xmlns:android=<font class="Fields">"http:<font class="Comments">//schemas.android.com/apk/res/android"</font></font></p><p>    </font>android:layout_width=<font class="Fields">"match_parent"</font></p><p>    </font>android:layout_height=<font class="Fields">"match_parent"</font></p><p>    </font>android:background=<font class="Fields">"@color/app_bg"</font></p><p>    </font>android:gravity=<font class="Fields">"center_horizontal"</font></p><p>    </font>android:orientation=<font class="Fields">"vertical"</font> &gt;</p><p>    </font>&lt;include layout=<font class="Fields">"@layout/titlebar"</font> /&gt;</p><p>    &lt;TextView</p><p>        </font>android:layout_width=<font class="Fields">"match_parent"</font></p><p>        </font>android:layout_height=<font class="Fields">"wrap_content"</font></p><p>        </font>android:padding=<font class="Fields">"10dp</p><p>        </font>android:text=<font class="Fields">"@string/hello"</font> /&gt;</p><p>&lt;/LinearLayout&gt;</p><p></pre></p><p>你也可以在节点中为被添加的布局文件的root View定义特别标识，重写所有layout参数即可(任何以“android：layout_”为前缀的属性)。例如：</p><p><pre>&lt;include android:id=<font class="Fields">"@+id/news_title"</font>  </p><p>	 </font>android:layout_width=<font class="Fields">"match_parent"</font></p><p>	 </font>android:layout_height=<font class="Fields">"match_parent"</font></p><p>	 </font>layout=<font class="Fields">"@layout/title"</font>/&gt;</p><p></pre></p><p style="color:#3333FF;">3、使用标签</p><p>当在布局文件中复用另外的布局时， 标签能够在布局层次消除多余的视图元素。例如，如果你的主布局文件是一个垂直地包含两个View的LinearLayout，该布局能够复用在其他布局中，而对任意包含两个View的布局文件都需要一个root View(否则，编译器会提示错误)。然而，在该可复用性布局中添加一个LinearLayout作为root View，将会导致一个垂直的LinearLayout包含另外的垂直。内嵌地LinearLayout只能减缓UI效率，其他毫无用处可言。该复用性布局利用.xml呈现如下：</p><p><pre>&lt;LinearLayout xmlns:android=<font class="Fields">"http:<font class="Comments">//schemas.android.com/apk/res/android</font></p><p>    </font>android:layout_width=<font class="Fields">"”match_parent”</p><p>    </font>android:layout_height=<font class="Fields">"”match_parent”</p><p>    </font>android:background=<font class="Fields">"@color/app_bg</p><p>    </font>android:gravity=<font class="Fields">"horizontal</p><p>    </font>android:orientation=<font class="Fields">"vertical"</font> &gt;</p><p>    &lt;Button</p><p>        </font>android:layout_width=<font class="Fields">"fill_parent</p><p>        </font>android:layout_height=<font class="Fields">"wrap_content</p><p>        </font>android:text=<font class="Fields">"@string/add"</font> /&gt;</p><p>    &lt;Button</p><p>        </font>android:layout_width=<font class="Fields">"fill_parent</p><p>        </font>android:layout_height=<font class="Fields">"wrap_content</p><p>        </font>android:text=<font class="Fields">"@string/delete"</font> /&gt;</p><p>&lt;/LinearLayout&gt;</p><p></pre></p><p>为了避免冗余的布局元素，你可以使用作为复用性布局文件地root View 。例如：</p><p><pre>&lt;merge xmlns:android=<font class="Fields">"http:<font class="Comments">//schemas.android.com/apk/res/android"</font> &gt;</font></p><p>    &lt;Button</p><p>        </font>android:layout_width=<font class="Fields">"fill_parent</p><p>        </font>android:layout_height=<font class="Fields">"wrap_content</p><p>        </font>android:text=<font class="Fields">"@string/add"</font> /&gt;</p><p>    &lt;Button</p><p>        </font>android:layout_width=<font class="Fields">"fill_parent</p><p>        </font>android:layout_height=<font class="Fields">"wrap_content</p><p>        </font>android:text=<font class="Fields">"@string/delete"</font> /&gt;</p><p>&lt;/merge&gt; </p><p></pre></p><p>现在，当你添加该布局文件时(使用标签)，系统忽略&lt; merge /&gt;节点并且直接添加两个Button去取代节点。</p><p></p></div>

</DIV></DIV>

<DIV id=footer style="display:none">
<P align="center">  
 
 
 
    </P>
</DIV></BODY></HTML>

