
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML xmlns="http://www.w3.org/1999/xhtml">
<HEAD>
<TITLE>Android中Intent中如何传递对象_Android学习手册</TITLE>
<META content="text/html; charset=gb2312" http-equiv=Content-Type><LINK  rel=stylesheet type=text/css href="../css/c5.css">
<META name=GENERATOR content="MSHTML 8.00.6001.18702">
<meta name="Description" content=Android基础 Android组件 Android用户界面 Android设备功能 Android数据存储 Android网络应用 Android游戏开发 Android多媒体 Android源码开发 Android高级进阶 Android面试题/>
<meta name="Keywords" content="android 学习手册">

</HEAD>
<BODY id=homesecond class=serverscripting>
<DIV id=wrapper>
<DIV id=header><h1><a href="../index.html">Android学习手册</a></h1> 
</DIV>

<DIV id=navfirst>
<div id="indexGuide"><UL><li ><A href="../basic/index.html">Android基础</A> </li><li class="navcurrentLink"><A href="index.html">Android组件</A> </li><li ><A href="../userinterface/index.html">用户界面</A> </li><li ><A href="../device/index.html">设备功能</A> </li><li ><A href="../datastorage/index.html">数据存储</A> </li><li ><A href="../network/index.html">网络应用</A> </li><li ><A href="../game/index.html">游戏开发</A> </li><li ><A href="../multimedia/index.html">多媒体</A> </li><li ><A href="../source/index.html">源码开发</A> </li><li ><A href="../advance/index.html">高级进阶</A> </li><li ><A href="../interview/index.html">Android面试题</A> </li></UL></div>
</DIV>
<DIV id=navsecond>
<DIV id=course>
<div id="kcTitle">课 程 表</div>


  <h2><A title="Activity" href="index_112.html">Activity</A></h2>

  <h2><A title="Intent" href="index_113.html">Intent</A></h2>
<UL><li ><A title=Intents和Intent Filters（理论部分） href="show_101_113.html">Intents和Intent Filters（理论部分）</A> </li><li ><A title=Intents和Intent Filters（实例部分） href="show_102_113.html">Intents和Intent Filters（实例部分）</A> </li><li ><A title=Android Intent和Intent Filter详解（一） href="show_103_113.html">Android Intent和Intent Filter详解（一）</A> </li><li ><A title=Android Intent和Intent Filter详解（二） href="show_104_113.html">Android Intent和Intent Filter详解（二）</A> </li><li ><A title=Android Intent和Intent Filter详解（三） href="show_105_113.html">Android Intent和Intent Filter详解（三）</A> </li><li ><A title=Android Intent和Intent Filter详解（四） href="show_106_113.html">Android Intent和Intent Filter详解（四）</A> </li><li ><A title=Android Intent和Intent Filter详解（五） href="show_107_113.html">Android Intent和Intent Filter详解（五）</A> </li><li ><A title=Android Intent和Bundle机制实例详解 href="show_108_113.html">Android Intent和Bundle机制实例详解</A> </li><li ><A title=Android Intent的几种用法全面总结 href="show_109_113.html">Android Intent的几种用法全面总结</A> </li><li class="currentLink"><A title=Android中Intent中如何传递对象 href="show_110_113.html">Android中Intent中如何传递对象</A> </li><li ><A title=如何调用Google Web Search？ href="show_111_113.html">如何调用Google Web Search？</A> </li></UL>
  <h2><A title="Service" href="index_114.html">Service</A></h2>

  <h2><A title="Content Provider" href="index_115.html">Content Provider</A></h2>

  <h2><A title="BroadcastReceiver" href="index_116.html">BroadcastReceiver</A></h2>

  <h2><A title="AsyncTask" href="index_117.html">AsyncTask</A></h2>

  <h2><A title="Handler" href="index_118.html">Handler</A></h2>

  <h2><A title="Thread" href="index_119.html">Thread</A></h2>

  <h2><A title="Permission" href="index_120.html">Permission</A></h2>

  <h2><A title="AIDL" href="index_121.html">AIDL</A></h2>

  <h2><A title="Json" href="index_122.html">Json</A></h2>

</DIV></DIV>
<DIV id=maincontent>
<DIV id=w3school>
<H1></H1>
<P><STRONG></STRONG></P></DIV>

<DIV>
<H2>Android中Intent中如何传递对象</H2>
<div style="line-height:20px; font-size:14px;"><p>就目前所知道的有两种方法，一种是Bundle.putSerializable(Key,Object);另一种是Bundle.putParcelable(Key, Object);当然这些Object是有一定的条件的，前者是实现了Serializable接口，而后者是实现了Parcelable接口，为了让大家更容易理解我还是照常写了一个简单的Demo,大家就一步一步跟我来吧！</p><p>第一步:新建一个Android工程命名为ObjectTranDemo(类比较多哦!)目录结构如下图:</p><p><img src="../img/component_intent/10_intent.jpg"></p><p>第二步:修改main.xml布局文件(这里我增加了两个按钮)代码如下</p><p><pre>&lt;?xml version=<font class="Fields">"1.0"</font> encoding=</font><font class="Fields">"utf-8"</font>?&gt;  </p><p>&lt;LinearLayout xmlns:android=<font class="Fields">"http:<font class="Comments">//schemas.android.com/apk/res/android"</font>  </font></p><p>    </font>android:orientation=<font class="Fields">"vertical"</font></p><p>    </font>android:layout_width=<font class="Fields">"fill_parent"</font></p><p>    </font>android:layout_height=<font class="Fields">"fill_parent"</font></p><p>    &gt;</p><p>&lt;TextView    </p><p>    </font>android:layout_width=<font class="Fields">"fill_parent"</font></p><p>    </font>android:layout_height=<font class="Fields">"wrap_content"</font></p><p>    </font>android:text=<font class="Fields">"Welcome to Mr wei</font><font class="Fields">'s blog."</font></p><p>    /&gt;</p><p>&lt;Button  </p><p>    </font>android:id=<font class="Fields">"@+id/button1"</font></p><p>    </font>android:layout_width=<font class="Fields">"fill_parent"</font></p><p>    </font>android:layout_height=<font class="Fields">"wrap_content"</font></p><p>    </font>android:text=<font class="Fields">"Serializable"</font></p><p>/&gt;  </p><p>&lt;Button  </p><p>    </font>android:id=<font class="Fields">"@+id/button2"</font></p><p>    </font>android:layout_width=<font class="Fields">"fill_parent"</font></p><p>    </font>android:layout_height=<font class="Fields">"wrap_content"</font></p><p>    </font>android:text=<font class="Fields">"Parcelable"</font></p><p>/&gt;  </p><p>&lt;/LinearLayout&gt; </p><p>&lt;/LinearLayout&gt;   </p><p></pre></p><p>第三步:新建两个类一个是Person.java实现Serializable接口，另一个Book.java实现Parcelable接口，代码分别如下:</p><p>Person.java:</p><p><pre><font class="keyword">import </font>java.io.Serializable;</p><p></p><p><font class="keyword">public </font><font class="keyword">class </font>Person </font><font class="keyword">implements </font>Serializable {</p><p>	<font class="keyword">private </font><font class="keyword">static </font><font class="keyword">final </font><font class="keyword">long </font>serialVersionUID = -7060210544600464481L;</p><p>	<font class="keyword">private </font>String name;</p><p>	<font class="keyword">private </font><font class="keyword">int </font>age;</p><p>	<font class="keyword">public </font>String getName() {</p><p>		<font class="keyword">return </font>name;</p><p>	}</p><p>	<font class="keyword">public </font><font class="keyword">void </font>setName(String name) {</p><p>		<font class="keyword">this</font>.name = name;</p><p>	}</p><p>	<font class="keyword">public </font><font class="keyword">int </font>getAge() {</p><p>		<font class="keyword">return </font>age;</p><p>	}</p><p>	<font class="keyword">public </font><font class="keyword">void </font>setAge(</font><font class="keyword">int </font>age) {</p><p>		<font class="keyword">this</font>.age = age;</p><p>	}</p><p>}</p><p></pre></p><p>Book.java:</p><p><pre><font class="keyword">import </font>android.os.Parcel;</p><p><font class="keyword">import </font>android.os.Parcelable;</p><p><font class="keyword">public </font><font class="keyword">class </font>Book </font><font class="keyword">implements </font>Parcelable {</p><p>	<font class="keyword">private </font>String bookName;</p><p>	<font class="keyword">private </font>String author;</p><p>	<font class="keyword">private </font><font class="keyword">int </font>publishTime;</p><p>	<font class="keyword">public </font>String getBookName() {</p><p>		<font class="keyword">return </font>bookName;</p><p>	}</p><p>	<font class="keyword">public </font><font class="keyword">void </font>setBookName(String bookName) {</p><p>		<font class="keyword">this</font>.bookName = bookName;</p><p>	}</p><p>	<font class="keyword">public </font>String getAuthor() {</p><p>		<font class="keyword">return </font>author;</p><p>	}</p><p>	<font class="keyword">public </font><font class="keyword">void </font>setAuthor(String author) {</p><p>		<font class="keyword">this</font>.author = author;</p><p>	}</p><p>	<font class="keyword">public </font><font class="keyword">int </font>getPublishTime() {</p><p>		<font class="keyword">return </font>publishTime;</p><p>	}</p><p>	<font class="keyword">public </font><font class="keyword">void </font>setPublishTime(</font><font class="keyword">int </font>publishTime) {</p><p>		<font class="keyword">this</font>.publishTime = publishTime;</p><p>	}</p><p>	<font class="keyword">public </font><font class="keyword">static </font><font class="keyword">final </font>Parcelable.Creator&lt;Book&gt; CREATOR = </font><font class="keyword">new </font>Creator&lt;Book&gt;() {</p><p>		<font class="keyword">public </font>Book createFromParcel(Parcel source) {</p><p>			</font>Book mBook = <font class="keyword">new </font>Book();</p><p>			mBook.bookName = source.readString();</p><p>			mBook.author = source.readString();</p><p>			mBook.publishTime = source.readInt();</p><p>			<font class="keyword">return </font>mBook;</p><p>		}</p><p>		<font class="keyword">public </font>Book[] newArray(</font><font class="keyword">int </font>size) {</p><p>			<font class="keyword">return </font><font class="keyword">new </font>Book[size];</p><p>		}</p><p>	};</p><p>	<font class="keyword">public </font><font class="keyword">int </font>describeContents() {</p><p>		<font class="keyword">return </font>0;</p><p>	}</p><p>	<font class="keyword">public </font><font class="keyword">void </font>writeToParcel(Parcel parcel, </font><font class="keyword">int </font>flags) {</p><p>		parcel.writeString(bookName);</p><p>		parcel.writeString(author);</p><p>		parcel.writeInt(publishTime);</p><p>	}</p><p>}</p><p></pre></p><p>第四步:修改ObjectTranDemo.java,并且新建两个Activity,一个是ObjectTranDemo1.java,别一个是ObjectTranDemo2.java.分别用来显示Person对像数据，和Book对象数据:,代码分别如下：</p><p>ObjectTranDemo.java:</p><p><pre><font class="keyword">import </font>android.R;</p><p><font class="keyword">import </font>android.app.Activity;</p><p><font class="keyword">import </font>android.content.Intent;</p><p><font class="keyword">import </font>android.os.Bundle;</p><p><font class="keyword">import </font>android.view.View;</p><p><font class="keyword">import </font>android.view.View.OnClickListener;</p><p><font class="keyword">import </font>android.widget.Button;</p><p><font class="keyword">public </font><font class="keyword">class </font>ObjectTranDemo </font><font class="keyword">extends </font>Activity </font><font class="keyword">implements </font>OnClickListener {</p><p>	<font class="keyword">private </font>Button sButton, pButton;</p><p>	<font class="keyword">public </font><font class="keyword">final </font><font class="keyword">static </font>String SER_KEY = <font class="Fields">"com.tutor.objecttran.ser"</font>;</p><p>	<font class="keyword">public </font><font class="keyword">final </font><font class="keyword">static </font>String PAR_KEY = <font class="Fields">"com.tutor.objecttran.par"</font>;</p><p>	<font class="keyword">public </font><font class="keyword">void </font>onCreate(Bundle savedInstanceState) {</p><p>		<font class="keyword">super</font>.onCreate(savedInstanceState);</p><p>		setContentView(R.layout.main);</p><p>		setupViews();</p><p></p><p>	}</p><p>	<font class="Comments">// 我的一贯作风呵呵</font></p><p>	<font class="keyword">public </font><font class="keyword">void </font>setupViews() {</p><p>		sButton = (Button) findViewById(R.id.button1);</p><p>		pButton = (Button) findViewById(R.id.button2);</p><p>		</font>sButton.setOnClickListener(<font class="keyword">this</font>);</p><p>		</font>pButton.setOnClickListener(<font class="keyword">this</font>);</p><p>	}</p><p>	<font class="Comments">// Serializeable传递对象的方法</font></p><p>	<font class="keyword">public </font><font class="keyword">void </font>SerializeMethod() {</p><p>		</font>Person mPerson = <font class="keyword">new </font>Person();</p><p>		</font>mPerson.setName(<font class="Fields">"frankie"</font>);</p><p>		mPerson.setAge(25);</p><p>		</font>Intent mIntent = <font class="keyword">new </font>Intent(</font><font class="keyword">this</font>, ObjectTranDemo1.</font><font class="keyword">class</font>);</p><p>		</font>Bundle mBundle = <font class="keyword">new </font>Bundle();</p><p>		mBundle.putSerializable(SER_KEY, mPerson);</p><p>		mIntent.putExtras(mBundle);</p><p>		startActivity(mIntent);</p><p>	}</p><p>	<font class="Comments">// Pacelable传递对象方法</font></p><p>	<font class="keyword">public </font><font class="keyword">void </font>PacelableMethod() {</p><p>		</font>Book mBook = <font class="keyword">new </font>Book();</p><p>		</font>mBook.setBookName(<font class="Fields">"Android Tutor"</font>);</p><p>		</font>mBook.setAuthor(<font class="Fields">"Frankie"</font>);</p><p>		mBook.setPublishTime(2010);</p><p>		</font>Intent mIntent = <font class="keyword">new </font>Intent(</font><font class="keyword">this</font>, ObjectTranDemo2.</font><font class="keyword">class</font>);</p><p>		</font>Bundle mBundle = <font class="keyword">new </font>Bundle();</p><p>		mBundle.putParcelable(PAR_KEY, mBook);</p><p>		mIntent.putExtras(mBundle);</p><p>		startActivity(mIntent);</p><p>	}</p><p>	<font class="Comments">// 铵钮点击事件响应</font></p><p>	<font class="keyword">public </font><font class="keyword">void </font>onClick(View v) {</p><p>		<font class="keyword">if </font>(v == sButton) {</p><p>			SerializeMethod();</p><p>		</font>} <font class="keyword">else </font>{</p><p>			PacelableMethod();</p><p>		}</p><p>	}</p><p>}</p><p></pre></p><p>ObjectTranDemo1.java:</p><p><pre><font class="keyword">import </font>android.app.Activity;</p><p><font class="keyword">import </font>android.os.Bundle;</p><p><font class="keyword">import </font>android.widget.TextView;</p><p><font class="keyword">public </font><font class="keyword">class </font>ObjectTranDemo1 </font><font class="keyword">extends </font>Activity {</p><p>	@Override</p><p>	<font class="keyword">public </font><font class="keyword">void </font>onCreate(Bundle savedInstanceState) {</p><p>		<font class="keyword">super</font>.onCreate(savedInstanceState);</p><p>		</font>TextView mTextView = <font class="keyword">new </font>TextView(</font><font class="keyword">this</font>);</p><p>		Person mPerson = (Person) getIntent().getSerializableExtra(</p><p>				ObjectTranDemo.SER_KEY);</p><p>		</font>mTextView.setText(<font class="Fields">"You name is: "</font> + mPerson.getName() + </font><font class="Fields">"\n</p><p>				</font>+ <font class="Fields">"You age is: "</font> + mPerson.getAge());</p><p>		setContentView(mTextView);</p><p>	}</p><p>}</p><p></pre></p><p>ObjectTranDemo2.java:</p><p><pre><font class="keyword">import </font>android.app.Activity;</p><p><font class="keyword">import </font>android.os.Bundle;</p><p><font class="keyword">import </font>android.widget.TextView;</p><p><font class="keyword">public </font><font class="keyword">class </font>ObjectTranDemo2 </font><font class="keyword">extends </font>Activity {</p><p>	<font class="keyword">public </font><font class="keyword">void </font>onCreate(Bundle savedInstanceState) {</p><p>		<font class="keyword">super</font>.onCreate(savedInstanceState);</p><p>		</font>TextView mTextView = <font class="keyword">new </font>TextView(</font><font class="keyword">this</font>);</p><p>		Book mBook = (Book) getIntent().getParcelableExtra(</p><p>				ObjectTranDemo.PAR_KEY);</p><p>		</font>mTextView.setText(<font class="Fields">"Book name is: "</font> + mBook.getBookName() + </font><font class="Fields">"\n</p><p>				</font>+ <font class="Fields">"Author is: "</font> + mBook.getAuthor() + </font><font class="Fields">"\n"</font> + </font><font class="Fields">"PublishTime is:</p><p>				+ mBook.getPublishTime());</p><p>		setContentView(mTextView);</p><p>	}</p><p>}</p><p></pre></p><p>第五步:比较重要的一步啦，修改AndroidManifest.xml文件（将两个新增的Activity，ObjectTranDemo1,ObjectTranDemo2)申明一下代码如下(第14，15行):</p><p><pre>view plaincopy to clipboardprint?</p><p>&lt;?xml version=<font class="Fields">"1.0"</font> encoding=</font><font class="Fields">"utf-8"</font>?&gt;  </p><p>&lt;manifest xmlns:android=<font class="Fields">"http:<font class="Comments">//schemas.android.com/apk/res/android"</font>  </font></p><p>      </font>package=<font class="Fields">"com.tutor.objecttran"</font></p><p>      </font>android:versionCode=<font class="Fields">"1"</font></p><p>      </font>android:versionName=<font class="Fields">"1.0"</font>&gt;</p><p>    </font>&lt;application android:icon=<font class="Fields">"@drawable/icon"</font> android:label=</font><font class="Fields">"@string/app_name"</font>&gt;</p><p>        </font>&lt;activity android:name=<font class="Fields">".ObjectTranDemo"</font></p><p>                  </font>android:label=<font class="Fields">"@string/app_name"</font>&gt;</p><p>            &lt;intent-filter&gt;</p><p>                </font>&lt;action android:name=<font class="Fields">"android.intent.action.MAIN"</font> /&gt;</p><p>                </font>&lt;category android:name=<font class="Fields">"android.intent.category.LAUNCHER"</font> /&gt;</p><p>            &lt;/intent-filter&gt;</p><p>        &lt;/activity&gt;</p><p>        </font>&lt;activity android:name=<font class="Fields">".ObjectTranDemo1"</font>&gt;&lt;/activity&gt;</p><p>        </font>&lt;activity android:name=<font class="Fields">".ObjectTranDemo2"</font>&gt;&lt;/activity&gt;</p><p>    &lt;/application&gt;</p><p>    </font>&lt;uses-sdk android:minSdkVersion=<font class="Fields">"7"</font> /&gt;</p><p>&lt;/manifest&gt;  </p><p></pre> </p><p>第六步:运行上述工程查看效果图啦:</p><p>效果1：首界面:</p><p><img src="../img/component_intent/10_intent2.jpg"></p><p>效果2:点击Serializable按钮</p><p><img src="../img/component_intent/10_intent3.jpg"></p><p>效果3:点击Parcelable按钮:</p><p><img src="../img/component_intent/10_intent4.jpg"></p><p>很多人知道在activity之间传递对象时有两个选择一个是Parcelable，另外一个是Serializable。但究竟我们该何时使用其中的一个呢？很多人不得而知，所以混用和滥用的情况就出现了。在这里我想给大家说清楚，以减少在程序中的不必要的风险。</p><p>1.在使用内存的时候，Parcelable 类比Serializable性能高，所以推荐使用Parcelable类。</p><p>2.Serializable在序列化的时候会产生大量的临时变量，从而引起频繁的GC。</p><p>3.Parcelable不能使用在要将数据存储在磁盘上的情况，因为Parcelable不能很好的保证数据的持续性在外界有变化的情况下。尽管Serializable效率低点，也不提倡用，但在这种情况下，还是建议你用Serializable。</p><p></p></div>

</DIV></DIV>

<DIV id=footer style="display:none">
<P align="center">  
 
 
 
    </P>
</DIV></BODY></HTML>

