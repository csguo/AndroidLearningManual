
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML xmlns="http://www.w3.org/1999/xhtml">
<HEAD>
<TITLE>Android 浅谈Cursor_Android学习手册</TITLE>
<META content="text/html; charset=gb2312" http-equiv=Content-Type><LINK  rel=stylesheet type=text/css href="../css/c5.css">
<META name=GENERATOR content="MSHTML 8.00.6001.18702">
<meta name="Description" content=Android基础 Android组件 Android用户界面 Android设备功能 Android数据存储 Android网络应用 Android游戏开发 Android多媒体 Android源码开发 Android高级进阶 Android面试题/>
<meta name="Keywords" content="android 学习手册">

</HEAD>
<BODY id=homesecond class=serverscripting>
<DIV id=wrapper>
<DIV id=header><h1><a href="../index.html">Android学习手册</a></h1> 
</DIV>

<DIV id=navfirst>
<div id="indexGuide"><UL><li ><A href="../basic/index.html">Android基础</A> </li><li ><A href="../component/index.html">Android组件</A> </li><li ><A href="../userinterface/index.html">用户界面</A> </li><li ><A href="../device/index.html">设备功能</A> </li><li class="navcurrentLink"><A href="index.html">数据存储</A> </li><li ><A href="../network/index.html">网络应用</A> </li><li ><A href="../game/index.html">游戏开发</A> </li><li ><A href="../multimedia/index.html">多媒体</A> </li><li ><A href="../source/index.html">源码开发</A> </li><li ><A href="../advance/index.html">高级进阶</A> </li><li ><A href="../interview/index.html">Android面试题</A> </li></UL></div>
</DIV>
<DIV id=navsecond>
<DIV id=course>
<div id="kcTitle">课 程 表</div>


  <h2><A title="ContentProvider" href="index_170.html">ContentProvider</A></h2>

  <h2><A title="Preferences" href="index_171.html">Preferences</A></h2>

  <h2><A title="SQLite" href="index_172.html">SQLite</A></h2>
<UL><li ><A title=Android 嵌入式SQLite数据库（一） href="show_201_172.html">Android 嵌入式SQLite数据库（一）</A> </li><li ><A title=Android 嵌入式SQLite数据库（二） href="show_202_172.html">Android 嵌入式SQLite数据库（二）</A> </li><li ><A title=Android 嵌入式SQLite数据库（三） href="show_203_172.html">Android 嵌入式SQLite数据库（三）</A> </li><li ><A title=Android 嵌入式SQLite数据库（四） href="show_204_172.html">Android 嵌入式SQLite数据库（四）</A> </li><li ><A title=Android 深入研究SQLite实例（一） href="show_205_172.html">Android 深入研究SQLite实例（一）</A> </li><li ><A title=Android 深入研究SQLite实例（二） href="show_206_172.html">Android 深入研究SQLite实例（二）</A> </li><li ><A title=Android 深入研究SQLite实例（三） href="show_207_172.html">Android 深入研究SQLite实例（三）</A> </li><li ><A title=Android 深入研究SQLite实例（四） href="show_208_172.html">Android 深入研究SQLite实例（四）</A> </li><li ><A title=Android 深入研究SQLite实例（五） href="show_209_172.html">Android 深入研究SQLite实例（五）</A> </li><li ><A title=Android 深入研究SQLite实例（六） href="show_210_172.html">Android 深入研究SQLite实例（六）</A> </li><li ><A title=Android 深入研究SQLite实例（七） href="show_211_172.html">Android 深入研究SQLite实例（七）</A> </li><li ><A title=Android 深入研究SQLite实例（八） href="show_212_172.html">Android 深入研究SQLite实例（八）</A> </li><li ><A title=Android 深入研究SQLite实例（九） href="show_213_172.html">Android 深入研究SQLite实例（九）</A> </li><li ><A title=Android 深入研究SQLite实例（十） href="show_214_172.html">Android 深入研究SQLite实例（十）</A> </li><li ><A title=Android 深入研究SQLite实例（十一） href="show_215_172.html">Android 深入研究SQLite实例（十一）</A> </li><li ><A title=SQLite 设计与概念（一） href="show_216_172.html">SQLite 设计与概念（一）</A> </li><li ><A title=SQLite 设计与概念（二） href="show_217_172.html">SQLite 设计与概念（二）</A> </li><li ><A title=SQLite数据库学习 href="show_218_172.html">SQLite数据库学习</A> </li><li ><A title=SQLite数据库增删改查操作 href="show_219_172.html">SQLite数据库增删改查操作</A> </li><li class="currentLink"><A title=Android 浅谈Cursor href="show_220_172.html">Android 浅谈Cursor</A> </li><li ><A title=SQLite 数据类型 href="show_221_172.html">SQLite 数据类型</A> </li><li ><A title=Android里sqlite多表联合查询 href="show_222_172.html">Android里sqlite多表联合查询</A> </li><li ><A title=SQLite的工具类 href="show_223_172.html">SQLite的工具类</A> </li><li ><A title=自定义SQlite数据文件存放位置 href="show_224_172.html">自定义SQlite数据文件存放位置</A> </li><li ><A title=SQLite和Android小项目 href="show_225_172.html">SQLite和Android小项目</A> </li><li ><A title=如何将SQLite数据库（dictionary.db文件）与apk文件一起发布 href="show_226_172.html">如何将SQLite数据库（dictionary.db文件）与apk文件一起发布</A> </li><li ><A title=SQLiteSpy免费正式版-小巧好用的SQLite GUI管理工具 href="show_227_172.html">SQLiteSpy免费正式版-小巧好用的SQLite GUI管理工具</A> </li></UL>
  <h2><A title="SD卡" href="index_173.html">SD卡</A></h2>

  <h2><A title="数据库" href="index_174.html">数据库</A></h2>

  <h2><A title="URI" href="index_175.html">URI</A></h2>

  <h2><A title="MediaStore" href="index_176.html">MediaStore</A></h2>

</DIV></DIV>
<DIV id=maincontent>
<DIV id=w3school>
<H1></H1>
<P><STRONG></STRONG></P></DIV>

<DIV>
<H2>Android 浅谈Cursor</H2>
<div style="line-height:20px; font-size:14px;"><p>使用过SQLite数据库的童鞋对Cursor应该不陌生，如果你是搞.net开发你大可以把Cursor理解成Ado.net中的数据集合。今天特地将它单独拿出来谈，加深自己和大家对Android 中使用 Cursor 的理解。</p><p style="color:#3333FF;">关于Cursor</p><p>在你理解和使用 Android Cursor 的时候你必须先知道关于 Cursor 的几件事情：</p><p>Cursor是每行的集合。使用moveToFirst()定位第一行。你必须知道每一列的名称。你必须知道每一列的数据类型。Cursor是一个随机的数据源。所有的数据都是通过下标取得。</p><p style="color:#3333FF;">关于 Cursor 的重要方法：</p><p><pre>close() 关闭游标，释放资源。</p><p>copyStringToBuffer(int columnIndex, CharArrayBuffer buffer) 在缓冲区中检索请求的列的文本，将将其存储。</p><p>getColumnCount() 返回所有列的总数。</p><p>getColumnIndex(String columnName) 返回指定列的名称，如果不存在返回-1。</p><p>getColumnIndexOrThrow(String columnName) 从零开始返回指定列名称，如果不存在将抛出IllegalArgumentException 异常。</p><p>getColumnName(int columnIndex) 从给定的索引返回列名。</p><p>getColumnNames() 返回一个字符串数组的列名。getCount() 返回Cursor 中的行数。</p><p>moveToFirst() 移动光标到第一行。</p><p>moveToLast() 移动光标到最后一行。</p><p>moveToNext() 移动光标到下一行。</p><p>moveToPosition(int position) 移动光标到一个绝对的位置。</p><p>moveToPrevious() 移动光标到上一行。</p><p></pre></p><p>下面来看看一小段代码：</p><p><pre><font class="keyword">if </font>(cur.moveToFirst() == </font><font class="keyword">false</font>)</p><p>{</p><p>	<font class="Comments">//为空的Cursor</font></p><p>	<font class="keyword">return</font>;</font></p><p>}</p><p><font class="Comments">//访问 Cursor 的下标获得其中的数据</font></p><p><font class="keyword">int </font>nameColumnIndex = cur.getColumnIndex(People.NAME);</p><p>String name = cur.getString(nameColumnIndex);</p><p><font class="Comments">//现在让我们看看如何循环 Cursor 取出我们需要的数据</font></p><p>while(cur.moveToNext())</p><p>{</p><p>	<font class="Comments">//光标移动成功</font></p><p>	<font class="Comments">//把数据取出</font></p><p>}</p><p></pre></p><p>当cur.moveToNext() 为假时将跳出循环，即 Cursor 数据循环完毕。如果你喜欢用 for 循环而不想用While 循环可以使用Google 提供的几下方法：</p><p><pre>isBeforeFirst() 返回游标是否指向之前第一行的位置</p><p>isAfterLast() 返回游标是否指向第最后一行的位置</p><p>isClosed() 如果返回 true 即表示该游戏标己关闭</p><p></pre></p><p>有了以上的方法，可以如此取出数据</p><p><pre>for(cur.moveToFirst();!cur.isAfterLast();cur.moveToNext()){</p><p>	<font class="keyword">int </font>nameColumn = cur.getColumnIndex(People.NAME);</p><p>	<font class="keyword">int </font>phoneColumn = cur.getColumnIndex(People.NUMBER);</p><p>	String name = cur.getString(nameColumn);</p><p>	String phoneNumber = cur.getString(phoneColumn);</p><p>}</p><p></pre></p><p>Tip:在Android查询数据是通过Cursor类来实现的。当我们使用SQLiteDatabase.query()方法时，就会得到Cursor对象，Cursor所指向的就是每一条数据。结合ADO.net的知识可能好理解一点。Cursor位于android.database.Cursor类，可见出它的设计是基于数据库服务产生的。另外，还有几个己知的子类，分别为：</p><p><pre>AbstractCursor</p><p>AbstractWindowedCursor</p><p>CrossProcessCursor</p><p>CursorWrapper</p><p>MatrixCursor</p><p>MergeCursor</p><p>MockCursor</p><p>SQLiteCursor</p><p></pre></p><p></p><p></p></div>

</DIV></DIV>

<DIV id=footer style="display:none">
<P align="center">  
 
 
 
    </P>
</DIV></BODY></HTML>

