
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML xmlns="http://www.w3.org/1999/xhtml">
<HEAD>
<TITLE>SQLite和Android小项目_Android学习手册</TITLE>
<META content="text/html; charset=gb2312" http-equiv=Content-Type><LINK  rel=stylesheet type=text/css href="../css/c5.css">
<META name=GENERATOR content="MSHTML 8.00.6001.18702">
<meta name="Description" content=Android基础 Android组件 Android用户界面 Android设备功能 Android数据存储 Android网络应用 Android游戏开发 Android多媒体 Android源码开发 Android高级进阶 Android面试题/>
<meta name="Keywords" content="android 学习手册">

</HEAD>
<BODY id=homesecond class=serverscripting>
<DIV id=wrapper>
<DIV id=header><h1><a href="../index.html">Android学习手册</a></h1> 
</DIV>

<DIV id=navfirst>
<div id="indexGuide"><UL><li ><A href="../basic/index.html">Android基础</A> </li><li ><A href="../component/index.html">Android组件</A> </li><li ><A href="../userinterface/index.html">用户界面</A> </li><li ><A href="../device/index.html">设备功能</A> </li><li class="navcurrentLink"><A href="index.html">数据存储</A> </li><li ><A href="../network/index.html">网络应用</A> </li><li ><A href="../game/index.html">游戏开发</A> </li><li ><A href="../multimedia/index.html">多媒体</A> </li><li ><A href="../source/index.html">源码开发</A> </li><li ><A href="../advance/index.html">高级进阶</A> </li><li ><A href="../interview/index.html">Android面试题</A> </li></UL></div>
</DIV>
<DIV id=navsecond>
<DIV id=course>
<div id="kcTitle">课 程 表</div>


  <h2><A title="ContentProvider" href="index_170.html">ContentProvider</A></h2>

  <h2><A title="Preferences" href="index_171.html">Preferences</A></h2>

  <h2><A title="SQLite" href="index_172.html">SQLite</A></h2>
<UL><li ><A title=Android 嵌入式SQLite数据库（一） href="show_201_172.html">Android 嵌入式SQLite数据库（一）</A> </li><li ><A title=Android 嵌入式SQLite数据库（二） href="show_202_172.html">Android 嵌入式SQLite数据库（二）</A> </li><li ><A title=Android 嵌入式SQLite数据库（三） href="show_203_172.html">Android 嵌入式SQLite数据库（三）</A> </li><li ><A title=Android 嵌入式SQLite数据库（四） href="show_204_172.html">Android 嵌入式SQLite数据库（四）</A> </li><li ><A title=Android 深入研究SQLite实例（一） href="show_205_172.html">Android 深入研究SQLite实例（一）</A> </li><li ><A title=Android 深入研究SQLite实例（二） href="show_206_172.html">Android 深入研究SQLite实例（二）</A> </li><li ><A title=Android 深入研究SQLite实例（三） href="show_207_172.html">Android 深入研究SQLite实例（三）</A> </li><li ><A title=Android 深入研究SQLite实例（四） href="show_208_172.html">Android 深入研究SQLite实例（四）</A> </li><li ><A title=Android 深入研究SQLite实例（五） href="show_209_172.html">Android 深入研究SQLite实例（五）</A> </li><li ><A title=Android 深入研究SQLite实例（六） href="show_210_172.html">Android 深入研究SQLite实例（六）</A> </li><li ><A title=Android 深入研究SQLite实例（七） href="show_211_172.html">Android 深入研究SQLite实例（七）</A> </li><li ><A title=Android 深入研究SQLite实例（八） href="show_212_172.html">Android 深入研究SQLite实例（八）</A> </li><li ><A title=Android 深入研究SQLite实例（九） href="show_213_172.html">Android 深入研究SQLite实例（九）</A> </li><li ><A title=Android 深入研究SQLite实例（十） href="show_214_172.html">Android 深入研究SQLite实例（十）</A> </li><li ><A title=Android 深入研究SQLite实例（十一） href="show_215_172.html">Android 深入研究SQLite实例（十一）</A> </li><li ><A title=SQLite 设计与概念（一） href="show_216_172.html">SQLite 设计与概念（一）</A> </li><li ><A title=SQLite 设计与概念（二） href="show_217_172.html">SQLite 设计与概念（二）</A> </li><li ><A title=SQLite数据库学习 href="show_218_172.html">SQLite数据库学习</A> </li><li ><A title=SQLite数据库增删改查操作 href="show_219_172.html">SQLite数据库增删改查操作</A> </li><li ><A title=Android 浅谈Cursor href="show_220_172.html">Android 浅谈Cursor</A> </li><li ><A title=SQLite 数据类型 href="show_221_172.html">SQLite 数据类型</A> </li><li ><A title=Android里sqlite多表联合查询 href="show_222_172.html">Android里sqlite多表联合查询</A> </li><li ><A title=SQLite的工具类 href="show_223_172.html">SQLite的工具类</A> </li><li ><A title=自定义SQlite数据文件存放位置 href="show_224_172.html">自定义SQlite数据文件存放位置</A> </li><li class="currentLink"><A title=SQLite和Android小项目 href="show_225_172.html">SQLite和Android小项目</A> </li><li ><A title=如何将SQLite数据库（dictionary.db文件）与apk文件一起发布 href="show_226_172.html">如何将SQLite数据库（dictionary.db文件）与apk文件一起发布</A> </li><li ><A title=SQLiteSpy免费正式版-小巧好用的SQLite GUI管理工具 href="show_227_172.html">SQLiteSpy免费正式版-小巧好用的SQLite GUI管理工具</A> </li></UL>
  <h2><A title="SD卡" href="index_173.html">SD卡</A></h2>

  <h2><A title="数据库" href="index_174.html">数据库</A></h2>

  <h2><A title="URI" href="index_175.html">URI</A></h2>

  <h2><A title="MediaStore" href="index_176.html">MediaStore</A></h2>

</DIV></DIV>
<DIV id=maincontent>
<DIV id=w3school>
<H1></H1>
<P><STRONG></STRONG></P></DIV>

<DIV>
<H2>SQLite和Android小项目</H2>
<div style="line-height:20px; font-size:14px;"><p>SQLite 是一个类似Access的轻量级数据库系统，但是更小、更快、容量更大，并发更高。为什么说 SQLite 最适合做 CMS (内容管理系统)呢？并不是说其他数据库不好， Oracle、MySQL、SQLServer 也都是非常优秀的 DBS，只不过他们设计目标不同，特性不同，所以只有更适用某个应用场景，没有绝对的好坏之分。</p><p>　　我归纳的中小型站点的CMS的特点如下：</p><p>　　1、数据量不超过10万</p><p>　　2、日页面访问量不超过10万</p><p>　　3、 一部分网站全部生成静态页面，一部分网站实时查询数据库动态访问</p><p>　　4、 站长不懂技术，不懂得复杂的数据库维护，只会用 FTP 管理网站</p><p>　　5 、个人站点基本上是一个人管理，一般情况下只有一个人在访问后台，没有并发</p><p>　　6、 对数据库来说是读多写少，只有在站长访问后台的时候才会写入</p><p>　　7、 多运行于虚拟主机，大部分PHP主机均同时支持MySQL，小部分PHP主机需要单独购买MySQL，PHP+MySQL的主机价格较PHP主机价格高。 (以万网为例：最便宜的PHP空间780元，最便宜的PHP+MySQL的PHP空间1150元)</p><p>　　8、 多数中小站点的HTTP服务与MySQL部署在同一服务器上</p><p>　　SQLite 的优点在中小网站CMS应用场景下表现突出：</p><p>　　1、与MySQL相比，它更彻底的免费，并且没有任何使用上的限制</p><p>　　2、非常小巧，PHP5以上版本中无需任何配置即可支持SQLite</p><p>　　3、无需单独购买数据库服务，无服务器进程，配置成本为零</p><p>　　4、整个数据库存储在一个单个的文件中，数据导入导出备份恢复都是复制文件，维护难度为零</p><p>　　5、读速度快，在数据量不是很大的情况下速度较快，更重要的是：省掉了一次数据库远程链接没有复杂的权限验证，打开就能操作</p><p>　　SQLite的缺点在中小网站 CMS 应用场景下被规避：</p><p>　　1、并发低 动态访问时当访问量不超过10万PV的时候，SQLite 超过 Access 的并发能力已经绰绰有余；生成静态页后更无需考虑数据库的并发问题</p><p>　　2、在大数据量的情况下表现较差 但是中小站点一般情况下数据量不超过10万，而SQlite 在 100 万数据量之下表现还不错，因为省掉了对数据库服务器的远程连接甚至会更快</p><p>　　3、写入较慢 默认配置下的 SQlite 的写入速度比MySQL慢了很多，但是 CMS 应用场景的写入操作较少。在插入新文章的时候基本感受不到慢。集中的写数据库操作只有在安装的时候会出现，不过只出现一次，可以忽略</p><p>　　4、为已有的表加索引较慢 但是在中小站点CMS中不会有这样的需求，可以忽略</p><p>　　5、无法将 MySQL 部署到与前端机不同的服务器上，但是中小站点也没有分开部署的需求</p><p>　　综上所述：在中小站点 CMS 的应用场景下 SQLite 能最大限度的降低建站成本，降低维护难度，又很好得规避了自身的缺点。所以我认为未来支持 SQLite 的 CMS 系统一定会大行其道。</p><p></p><p>　　Android 小项目之--SQLite 使用法门</p><p>　　每个应用程序都要使用数据，Android应用程序也不例外，Android使用开源的、与操作系统无关的SQL数据库 --大名鼎鼎的SQLite.SQLite是一款轻量级数据库，它的设计目的是嵌入式，而且它占用的资源非常少，在嵌入式设备中，可能只需要几百KB，这也是 Android 系统采用 SQLite 数据库的原因之一吧。</p><p>简介</p><p style="color:#3333FF;">轻量级</p><p>使用 SQLite 只需要带一个动态库，就可以享受它的全部功能，而且那个动态库的尺寸想当小。</p><p style="color:#3333FF;">独立性</p><p>SQLite 数据库的核心引擎不需要依赖第三方软件，也不需要所谓的“安装”。</p><p style="color:#3333FF;">隔离性</p><p>SQLite 数据库中所有的信息(比如表、视图、触发器等)都包含在一个文件夹内，方便管理和维护。</p><p style="color:#3333FF;">跨平台</p><p>SQLite 目前支持大部分操作系统，不至电脑操作系统更在众多的手机系统也是能够运行，比如：Android。</p><p style="color:#3333FF;">多语言接口</p><p>SQLite 数据库支持多语言编程接口。</p><p style="color:#3333FF;">安全性</p><p>SQLite 数据库通过数据库级上的独占性和共享锁来实现独立事务处理。这意味着多个进程可以在同一时间从同一数据库读取数据，但只能有一个可以写入数据。</p><p style="color:#3333FF;">SQLite使用介绍</p><p>首先先来看一下本篇例子继承 SQLiteOpenHelper 类实现的 dbHelper 类。</p><p><pre>　</p><p><font class="keyword">import </font>android.content.ContentValues;</p><p><font class="keyword">import </font>android.content.Context;</p><p><font class="keyword">import </font>android.database.Cursor;</p><p><font class="keyword">import </font>android.database.sqlite.SQLiteDatabase;</p><p><font class="keyword">import </font>android.database.sqlite.SQLiteOpenHelper;</p><p><font class="keyword">import </font>android.database.sqlite.SQLiteDatabase.CursorFactory;</p><p><font class="keyword">public </font><font class="keyword">class </font>DBHelper </font><font class="keyword">extends </font>SQLiteOpenHelper {</p><p>	<font class="keyword">private </font><font class="keyword">final </font><font class="keyword">static </font>String DATABASE_NAME = <font class="Fields">"sec_db"</font>;</p><p>	<font class="keyword">private </font><font class="keyword">final </font><font class="keyword">static </font><font class="keyword">int </font>DATABASE_VERSION = 1;</p><p>	<font class="keyword">private </font><font class="keyword">final </font><font class="keyword">static </font>String TABLE_NAME = <font class="Fields">"sec_pwd"</font>;</p><p>	<font class="keyword">public </font><font class="keyword">final </font><font class="keyword">static </font>String FIELD_ID = <font class="Fields">"_id"</font>;</p><p>	<font class="keyword">public </font><font class="keyword">final </font><font class="keyword">static </font>String FIELD_TITLE = <font class="Fields">"sec_Title"</font>;</p><p>	<font class="keyword">public </font>DBHelper(Context context) {</p><p>		<font class="keyword">super</font>(context, DATABASE_NAME, </font><font class="keyword">null</font>, DATABASE_VERSION);</p><p>	}</p><p>	@Override</p><p>	<font class="keyword">public </font><font class="keyword">void </font>onCreate(SQLiteDatabase db) {</p><p>		</font>String sql = <font class="Fields">"Create table "</font> + TABLE_NAME + </font><font class="Fields">"("</font> + FIELD_ID</p><p>				</font>+ <font class="Fields">" integer primary key autoincrement,"</font> + FIELD_TITLE</p><p>				</font>+ <font class="Fields">" text );"</font>;</p><p>		db.execSQL(sql);</p><p>	}</p><p>	@Override</p><p>	<font class="keyword">public </font><font class="keyword">void </font>onUpgrade(SQLiteDatabase db, </font><font class="keyword">int </font>oldVersion, </font><font class="keyword">int </font>newVersion) {</p><p>		</font>String sql = <font class="Fields">" DROP TABLE IF EXISTS "</font> + TABLE_NAME;</p><p>		db.execSQL(sql);</p><p>		onCreate(db);</p><p>	}</p><p>	<font class="keyword">public </font>Cursor select() {</p><p>		</font>SQLiteDatabase db = <font class="keyword">this</font>.getReadableDatabase();</p><p>		</font>Cursor cursor = db.query(TABLE_NAME, <font class="keyword">null</font>, </font><font class="keyword">null</font>, </font><font class="keyword">null</font>, </font><font class="keyword">null</font>, </font><font class="keyword">null</font>,</p><p>				<font class="Fields">" _id desc"</font>);</p><p>		<font class="keyword">return </font>cursor;</p><p>	}</p><p>	<font class="keyword">public </font><font class="keyword">long </font>insert(String Title) {</p><p>		</font>SQLiteDatabase db = <font class="keyword">this</font>.getWritableDatabase();</p><p>		</font>ContentValues cv = <font class="keyword">new </font>ContentValues();</p><p>		cv.put(FIELD_TITLE, Title);</p><p>		<font class="keyword">long </font>row = db.insert(TABLE_NAME, </font><font class="keyword">null</font>, cv);</p><p>		<font class="keyword">return </font>row;</p><p>	}</p><p>	<font class="keyword">public </font><font class="keyword">void </font>delete(</font><font class="keyword">int </font>id) {</p><p>		</font>SQLiteDatabase db = <font class="keyword">this</font>.getWritableDatabase();</p><p>		</font>String where = FIELD_ID + <font class="Fields">"=？"</font>;</p><p>		String[] whereValue = { Integer.toString(id) };</p><p>		db.delete(TABLE_NAME, where, whereValue);</p><p>	}</p><p>	<font class="keyword">public </font><font class="keyword">void </font>update(</font><font class="keyword">int </font>id, String Title) {</p><p>		</font>SQLiteDatabase db = <font class="keyword">this</font>.getWritableDatabase();</p><p>		</font>String where = FIELD_ID + <font class="Fields">"=？"</font>;</p><p>		String[] whereValue = { Integer.toString(id) };</p><p>		</font>ContentValues cv = <font class="keyword">new </font>ContentValues();</p><p>		cv.put(FIELD_TITLE, Title);</p><p>		db.update(TABLE_NAME, cv, where, whereValue);</p><p>	}</p><p>}</p><p></pre></p><p style="color:#3333FF;">创建和打开数据库</p><p>上篇通过构造函数来创建数据库，看一下构造函数的方法</p><p><pre>　</p><p>android.database.sqlite.SQLiteOpenHelper.SQLiteOpenHelper(Context context， String name， CursorFactory factory， int version)</p><p>public SQLiteOpenHelper (Context context， String name， SQLiteDatabase.CursorFactory factory， int version)</p><p>Since： API Level 1</p><p>Create a helper object to create， open， and/or manage a database. The database is not actually created or opened until one of getWritableDatabase() or getReadableDatabase() is called.</p><p>Parameters</p><p>context  to use to open or create the database</p><p>name  of the database file， or null for an in-memory database</p><p>factory  to use for creating cursor objects， or null for the default</p><p>version  number of the database (starting at 1)； if the database is older， onUpgrade(SQLiteDatabase， int， int) will be used to upgrade the database</p><p>Public Methods</p><p></pre></p><p>大体可以理成如下：如果进入此函数，不存在此数据库则创建，如果存在此数据库则打开连接，只要进入此方法就可以用打开的连接获得getWritableDatabase()或getReadableDatabase()这两个方法。</p><p>创建表--》Create Table</p><p>一个数据库中可以包含多个表，每一条数据都存在指定的表中，要创建可以通过 execSQL 方法来执行一条 SQL 语句。上面的方法为</p><p>代码</p><p><pre><font class="keyword">public </font><font class="keyword">void </font>onCreate(SQLiteDatabase db) {</p><p>	</font>String sql = <font class="Fields">"Create table "</font> + TABLE_NAME + </font><font class="Fields">"("</font> + FIELD_ID</p><p>			</font>+ <font class="Fields">" integer primary key autoincrement，"</font> + FIELD_TITLE</p><p>			</font>+ <font class="Fields">" text );"</font>;</p><p>	db.execSQL(sql);</p><p>}</p><p></pre></p><p>上面代码创建了表名为“sec_pwd” 的数据表，表内存在一个 integer 类型的主键和一个 text 类型的字段，并执行创建该表。</p><p>添加数据--》Insert</p><p>上面的代码封装了一个使用SQLite 的 insert 方法，向表中添加数据，但是insert 方法要求把数据都打包到 ContentValues 中，ContentValue其实可就是一个 HashTable，Key值是字段名称，Value 值是字段的值.通过 ContentValues 的put 方法就可以把数据库放到 ContentValue 对象中，然后插入到表中去。代码为：</p><p><pre><font class="keyword">public </font><font class="keyword">long </font>insert(String Title) {</p><p>	</font>SQLiteDatabase db = <font class="keyword">this</font>.getWritableDatabase();</p><p>	</font>ContentValues cv = <font class="keyword">new </font>ContentValues();</p><p>	cv.put(FIELD_TITLE, Title);</p><p>	<font class="keyword">long </font>row = db.insert(TABLE_NAME, </font><font class="keyword">null</font>, cv);</p><p>	<font class="keyword">return </font>row;</p><p>}</p><p></pre></p><p>删除数据--》Delete</p><p>依此类推，添加数据用Insert，那么删除数据为Delete</p><p><pre><font class="keyword">public </font><font class="keyword">class </font>Snippet {</p><p>	<font class="keyword">public </font><font class="keyword">void </font>delete(</font><font class="keyword">int </font>id) {</p><p>		</font>SQLiteDatabase db = <font class="keyword">this</font>.getWritableDatabase();</p><p>		</font>String where = FIELD_ID + <font class="Fields">"=？"</font>;</p><p>		String[] whereValue = { Integer.toString(id) };</p><p>		db.delete(TABLE_NAME, where, whereValue);</p><p>	}</p><p>	<font class="keyword">public </font><font class="keyword">void </font>update(</font><font class="keyword">int </font>id, String Title) {</p><p>		</font>SQLiteDatabase db = <font class="keyword">this</font>.getWritableDatabase();</p><p>		</font>String where = FIELD_ID + <font class="Fields">"=？"</font>;</p><p>		String[] whereValue = { Integer.toString(id) };</p><p>		</font>ContentValues cv = <font class="keyword">new </font>ContentValues();</p><p>		cv.put(FIELD_TITLE, Title);</p><p>		db.update(TABLE_NAME, cv, where, whereValue);</p><p>	}</p><p>}</p><p></pre></p><p>可根据自己需要修改字段自行加参数。</p><p>查询数据--》Query</p><p><pre>　</p><p><font class="keyword">public </font>Cursor select()</p><p>{</p><p>　　SQLiteDatabase db = <font class="keyword">this</font>.getReadableDatabase();</p><p>　　Cursor cursor = db.query(TABLE_NAME, <font class="keyword">null</font>, </font><font class="keyword">null</font>, </font><font class="keyword">null</font>, </font><font class="keyword">null</font>, </font><font class="keyword">null</font>, <font class="Fields">" _id desc"</font>);</p><p>　　<font class="keyword">return </font>cursor；</p><p>}</p><p></pre></p><p>在Android中查询数据是通过Cursor类来实现的，当我们使用SQLiteDatabase.query()方法时，会得到一个Cursor对象，Cursor指向的就是每一条数据.它提供了很多有关查询的方法，具体截图如下：</p><p><img src="../img/data_sqlite/25_sqlite.jpg"></p><p><img src="../img/data_sqlite/25_sqlite2.jpg"></p><p>现在dbHelper己经封装完毕，接下来正式进入到我们实际例子中要操作的功能吧，项目运行效果图：</p><p><img src="../img/data_sqlite/25_sqlite4.jpg"></p><p>这里用到了Menu做功能按钮，实例代码如下：</p><p><pre><font class="keyword">import </font>android.app.Activity;</p><p><font class="keyword">import </font>android.database.Cursor;</p><p><font class="keyword">import </font>android.database.sqlite.SQLiteCursor;</p><p><font class="keyword">import </font>android.os.Bundle;</p><p><font class="keyword">import </font>android.view.Menu;</p><p><font class="keyword">import </font>android.view.MenuItem;</p><p><font class="keyword">import </font>android.view.View;</p><p><font class="keyword">import </font>android.widget.AdapterView;</p><p><font class="keyword">import </font>android.widget.EditText;</p><p><font class="keyword">import </font>android.widget.ListAdapter;</p><p><font class="keyword">import </font>android.widget.ListView;</p><p><font class="keyword">import </font>android.widget.SimpleCursorAdapter;</p><p><font class="keyword">import </font>android.widget.AdapterView.OnItemClickListener;</p><p><font class="keyword">import </font>android.widget.AdapterView.OnItemSelectedListener;</p><p><font class="keyword">public </font><font class="keyword">class </font>testDbActivity </font><font class="keyword">extends </font>Activity {</p><p>	<font class="keyword">private </font>dbHelper db;</p><p>	<font class="keyword">private </font>Cursor myCursor;</p><p>	<font class="keyword">private </font>ListView myListView;</p><p>	<font class="keyword">private </font>EditText myEditText;</p><p>	<font class="keyword">private </font><font class="keyword">int </font>_id;</p><p>	<font class="keyword">protected </font><font class="keyword">final </font><font class="keyword">static </font><font class="keyword">int </font>MENU_ADD = Menu.FIRST;</p><p>	<font class="keyword">protected </font><font class="keyword">final </font><font class="keyword">static </font><font class="keyword">int </font>MENU_EDIT = Menu.FIRST + 1;</p><p>	<font class="keyword">protected </font><font class="keyword">final </font><font class="keyword">static </font><font class="keyword">int </font>MENU_DELETE = Menu.FIRST + 2;</p><p>	@Override</p><p>	<font class="keyword">public </font><font class="keyword">boolean </font>onCreateOptionsMenu(Menu menu) {</p><p>		<font class="keyword">super</font>.onCreateOptionsMenu(menu);</p><p>		menu.add(Menu.NONE, MENU_ADD, 0, R.string.ADD);</p><p>		menu.add(Menu.NONE, MENU_EDIT, 0, R.string.EDIT);</p><p>		menu.add(Menu.NONE, MENU_DELETE, 0, R.string.DELETE);</p><p>		<font class="keyword">return </font><font class="keyword">true</font>;</p><p>	}</p><p>	@Override</p><p>	<font class="keyword">public </font><font class="keyword">boolean </font>onOptionsItemSelected(MenuItem item) {</p><p>		<font class="keyword">super</font>.onOptionsItemSelected(item);</p><p>		<font class="keyword">switch </font>(item.getItemId()) {</p><p>		<font class="keyword">case </font>MENU_ADD:</p><p>			</font>operation(<font class="Fields">"add"</font>);</p><p>			<font class="keyword">break</font>;</p><p>		<font class="keyword">case </font>MENU_EDIT:</p><p>			</font>operation(<font class="Fields">"edit"</font>);</p><p>			<font class="keyword">break</font>;</p><p>		<font class="keyword">case </font>MENU_DELETE:</p><p>			</font>operation(<font class="Fields">"delete"</font>);</p><p>			<font class="keyword">break</font>;</p><p>		<font class="keyword">default</font>:</p><p>			<font class="keyword">break</font>;</p><p>		}</p><p>		<font class="keyword">return </font><font class="keyword">true</font>;</p><p>	}</p><p>	<font class="Comments">/** Called when the activity is first created. */</font></p><p>	@Override</p><p>	<font class="keyword">public </font><font class="keyword">void </font>onCreate(Bundle savedInstanceState) {</p><p>		<font class="keyword">super</font>.onCreate(savedInstanceState);</p><p>		setContentView(R.layout.main);</p><p>		myEditText = (EditText) findViewById(R.id.EditText1);</p><p>		myListView = (ListView) findViewById(R.id.ListView1);</p><p>		</font>db = <font class="keyword">new </font>dbHelper(testDbActivity.</font><font class="keyword">this</font>);</p><p>		myCursor = db.select();</p><p>		</font>SimpleCursorAdapter adpater = <font class="keyword">new </font>SimpleCursorAdapter(</font><font class="keyword">this</font>, R.layout.test, myCursor,</p><p>		<font class="keyword">new </font>String[] { dbHelper.FIELD_TITLE </font>},</p><p>		<font class="keyword">new </font><font class="keyword">int</font>[] { R.id.topTextView </font>});</p><p>		myListView.setAdapter(adpater);</p><p>		</font>myListView.setOnItemClickListener(<font class="keyword">new </font>OnItemClickListener() {</p><p>			@Override</p><p>			<font class="keyword">public </font><font class="keyword">void </font>onItemClick(AdapterView&lt;?&gt; arg0, View arg1, </font><font class="keyword">int </font>arg2,</p><p>			<font class="keyword">long </font>arg3) {</p><p>				myCursor.moveToPosition(arg2);</p><p>				_id = myCursor.getInt(0);</p><p>				myEditText.setText(myCursor.getString(1));</p><p>			}</p><p>		});</p><p>		</font>myListView.setOnItemSelectedListener(<font class="keyword">new </font>OnItemSelectedListener() {</p><p>			@Override</p><p>			<font class="keyword">public </font><font class="keyword">void </font>onItemSelected(AdapterView&lt;?&gt; arg0, View arg1,</p><p>			<font class="keyword">int </font>arg2, </font><font class="keyword">long </font>arg3) {</p><p>				SQLiteCursor sc = (SQLiteCursor) arg0.getSelectedItem();</p><p>				_id = sc.getInt(0);</p><p>				myEditText.setText(sc.getString(1));</p><p>			}</p><p>			@Override</p><p>			<font class="keyword">public </font><font class="keyword">void </font>onNothingSelected(AdapterView&lt;?&gt; arg0) {</p><p>			}</p><p>		});</p><p>	}</p><p>	<font class="keyword">private </font><font class="keyword">void </font>operation(String cmd)</p><p>	{</p><p>		<font class="keyword">if </font>(myEditText.getText().toString().equals(<font class="Fields">""</font>))</p><p>			<font class="keyword">return</font>;</font></p><p>		<font class="keyword">if </font>(cmd == <font class="Fields">"add"</font>)</p><p>			db.insert(myEditText.getText().toString());</p><p>		<font class="keyword">if </font>(cmd == <font class="Fields">"edit"</font>)</p><p>			db.update(_id, myEditText.getText().toString());</p><p>		<font class="keyword">if </font>(cmd == <font class="Fields">"delete"</font>)</p><p>			db.delete(_id);</p><p>		myCursor.requery();</p><p>		myListView.invalidateViews();</p><p>		</font>myEditText.setText(<font class="Fields">""</font>);</p><p>		_id = 0;</p><p>	}</p><p>}</p><p></pre></p><p>至此，功能己经基本完成。</p><p></p><p></p></div>

</DIV></DIV>

<DIV id=footer style="display:none">
<P align="center">  
 
 
 
    </P>
</DIV></BODY></HTML>

