
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML xmlns="http://www.w3.org/1999/xhtml">
<HEAD>
<TITLE>如何在你的程序中嵌入收发短信功能_Android学习手册</TITLE>
<META content="text/html; charset=gb2312" http-equiv=Content-Type><LINK  rel=stylesheet type=text/css href="../css/c5.css">
<META name=GENERATOR content="MSHTML 8.00.6001.18702">
<meta name="Description" content=Android基础 Android组件 Android用户界面 Android设备功能 Android数据存储 Android网络应用 Android游戏开发 Android多媒体 Android源码开发 Android高级进阶 Android面试题/>
<meta name="Keywords" content="android 学习手册">

</HEAD>
<BODY id=homesecond class=serverscripting>
<DIV id=wrapper>
<DIV id=header><h1><a href="../index.html">Android学习手册</a></h1> 
</DIV>

<DIV id=navfirst>
<div id="indexGuide"><UL><li ><A href="../basic/index.html">Android基础</A> </li><li ><A href="../component/index.html">Android组件</A> </li><li ><A href="../userinterface/index.html">用户界面</A> </li><li class="navcurrentLink"><A href="index.html">设备功能</A> </li><li ><A href="../datastorage/index.html">数据存储</A> </li><li ><A href="../network/index.html">网络应用</A> </li><li ><A href="../game/index.html">游戏开发</A> </li><li ><A href="../multimedia/index.html">多媒体</A> </li><li ><A href="../source/index.html">源码开发</A> </li><li ><A href="../advance/index.html">高级进阶</A> </li><li ><A href="../interview/index.html">Android面试题</A> </li></UL></div>
</DIV>
<DIV id=navsecond>
<DIV id=course>
<div id="kcTitle">课 程 表</div>


  <h2><A title="设备信息" href="index_157.html">设备信息</A></h2>

  <h2><A title="摄像头" href="index_158.html">摄像头</A></h2>

  <h2><A title="通讯录" href="index_159.html">通讯录</A></h2>

  <h2><A title="电话" href="index_160.html">电话</A></h2>

  <h2><A title="短信" href="index_161.html">短信</A></h2>
<UL><li ><A title=Android sms讲解 href="show_401_161.html">Android sms讲解</A> </li><li ><A title=Android 发送和接收短信实例（一） href="show_402_161.html">Android 发送和接收短信实例（一）</A> </li><li ><A title=Android 发送和接收短信实例（二） href="show_403_161.html">Android 发送和接收短信实例（二）</A> </li><li ><A title=Android 发送和接收短信实例（三） href="show_404_161.html">Android 发送和接收短信实例（三）</A> </li><li ><A title=Android 监听SMS消息 href="show_405_161.html">Android 监听SMS消息</A> </li><li ><A title=Android 追踪和确认SMS消息传递 href="show_406_161.html">Android 追踪和确认SMS消息传递</A> </li><li ><A title=Android 读取短信 href="show_407_161.html">Android 读取短信</A> </li><li ><A title=Android SMS小结 href="show_408_161.html">Android SMS小结</A> </li><li ><A title=短信的收发及在android模拟器之间实践（一） href="show_409_161.html">短信的收发及在android模拟器之间实践（一）</A> </li><li ><A title=短信的收发及在android模拟器之间实践（二） href="show_410_161.html">短信的收发及在android模拟器之间实践（二）</A> </li><li class="currentLink"><A title=如何在你的程序中嵌入收发短信功能 href="show_411_161.html">如何在你的程序中嵌入收发短信功能</A> </li><li ><A title=系统短信库的一些用法 href="show_412_161.html">系统短信库的一些用法</A> </li><li ><A title=在Android中发送短信和彩信 href="show_413_161.html">在Android中发送短信和彩信</A> </li><li ><A title=怎么编写代码实现拦截一些网络垃圾短信 href="show_414_161.html">怎么编写代码实现拦截一些网络垃圾短信</A> </li><li ><A title=Android调用系统短信Intent时将预填接收号码 href="show_415_161.html">Android调用系统短信Intent时将预填接收号码</A> </li><li ><A title=Android广播监听短信并显示内容 href="show_416_161.html">Android广播监听短信并显示内容</A> </li></UL>
  <h2><A title="传感器" href="index_162.html">传感器</A></h2>

  <h2><A title="定位" href="index_163.html">定位</A></h2>

  <h2><A title="视频系统" href="index_164.html">视频系统</A></h2>

  <h2><A title="音频系统" href="index_165.html">音频系统</A></h2>

  <h2><A title="铃声" href="index_166.html">铃声</A></h2>

  <h2><A title="音量" href="index_167.html">音量</A></h2>

  <h2><A title="录音" href="index_168.html">录音</A></h2>

  <h2><A title="输入法" href="index_169.html">输入法</A></h2>

</DIV></DIV>
<DIV id=maincontent>
<DIV id=w3school>
<H1></H1>
<P><STRONG></STRONG></P></DIV>

<DIV>
<H2>如何在你的程序中嵌入收发短信功能</H2>
<div style="line-height:20px; font-size:14px;"><p>注1：本文原文为英文版本的教程，我只在其基础上加以修改和汉化。</p><p>注2：本文作为初学者入门，简要的运用了几个基本的功能。</p><p>在这篇文章里将介绍如何在你的android应用中嵌入收发短信的功能。我们不需要拿真机来测试，只需要拿android仿真器就能调试和测试收发短信的功能（当然有条件可以在真机上试试，不过发短信要收钱的哦^_^）。</p><p>本文描述的步骤是基于eclipse开发的，阅读本文的前提是已经搭建好java环境，android sdk已经下载了，eclipse上已把Android开发的插件安装好了。</p><p>一、发短信功能</p><p>1、创建android项目</p><p>首先打开Eclipse，文件-&gt;新建-&gt;项目，创建一个新的Android project。</p><p>2、声明权限</p><p>Android是通过基于权限声明的策略来请求系统功能权限的，我们这里所说的收发短信的功能就是需要声明后才能使用的。下面我们来声明这个权限。</p><p>Android的权限声明是在AndroidManifest.xml文件中声明的。我们找到AndroidManifest.xml文件，在里面增加两个permissions：SEND_SMS和RECEIVE_SMS（见uses-permission部分）：</p><p><pre>&lt;?xml version =<font class="Fields">"1.0"</font> encoding =</font><font class="Fields">"utf-8"</font>?&gt;</p><p>&lt;manifest xmlns:android=<font class="Fields">"http:<font class="Comments">//schemas.android.com/apk/res/android</font></p><p>    </font>package=<font class="Fields">"net.learn2develop.SMSMessaging</p><p>    </font>android:versionCode=<font class="Fields">"1</p><p>    </font>android:versionName=<font class="Fields">"1.0.0"</font> &gt;</p><p>    &lt;application</p><p>        </font>android:icon=<font class="Fields">"@drawable/icon</p><p>        </font>android:label=<font class="Fields">"@string/app_name"</font> &gt;</p><p>        &lt;activity</p><p>            </font>android:name=<font class="Fields">".SMS</p><p>            </font>android:label=<font class="Fields">"@string/app_name"</font> &gt;</p><p>            &lt;intent-filter&gt;</p><p>                </font>&lt;action android:name=<font class="Fields">"android.intent.action.MAIN"</font> /&gt;</p><p>                </font>&lt;category android:name=<font class="Fields">"android.intent.category.LAUNCHER"</font> /&gt;</p><p>            &lt;/intent-filter&gt;</p><p>        &lt;/activity&gt;</p><p>    &lt;/application&gt;</p><p>    </font>&lt;uses-permission android:name=<font class="Fields">"android.permission.SEND_SMS"</font> &gt;</p><p>    &lt;/uses-permission&gt;</p><p>    </font>&lt;uses-permission android:name=<font class="Fields">"android.permission.RECEIVE_SMS"</font> &gt;</p><p>    &lt;/uses-permission&gt;</p><p>&lt;/manifest&gt;</p><p></pre></p><p>3、设计一个粗略的界面</p><p>下面我们来编写程序的界面UI，在res/layout文件夹中找到main.xml文件，增加如下代码：</p><p><pre>&lt;?xml version=<font class="Fields">"1.0"</font> encoding=</font><font class="Fields">"utf-8"</font>?&gt;</p><p>&lt;LinearLayout xmlns:android=<font class="Fields">"http:<font class="Comments">//schemas.android.com/apk/res/android</font></p><p>    </font>android:layout_width=<font class="Fields">"fill_parent</p><p>    </font>android:layout_height=<font class="Fields">"fill_parent</p><p>    </font>android:orientation=<font class="Fields">"vertical"</font> &gt;</p><p>    &lt;TextView</p><p>        </font>android:layout_width=<font class="Fields">"fill_parent</p><p>        </font>android:layout_height=<font class="Fields">"wrap_content</p><p>        </font>android:text=<font class="Fields">"鑱旗郴浜哄佛镰?</font> /&gt;</p><p>    &lt;EditText</p><p>        </font>android:id=<font class="Fields">"@+id/txtPhoneNo</p><p>        </font>android:layout_width=<font class="Fields">"fill_parent</p><p>        </font>android:layout_height=<font class="Fields">"wrap_content"</font> /&gt;</p><p>    &lt;TextView</p><p>        </font>android:layout_width=<font class="Fields">"fill_parent</p><p>        </font>android:layout_height=<font class="Fields">"wrap_content</p><p>        </font>android:text=<font class="Fields">"淇℃伅鍐呭"</font> /&gt;</p><p>    &lt;EditText</p><p>        </font>android:id=<font class="Fields">"@+id/txtMessage</p><p>        </font>android:layout_width=<font class="Fields">"fill_parent</p><p>        </font>android:layout_height=<font class="Fields">"150px</p><p>        </font>android:gravity=<font class="Fields">"top"</font> /&gt;</p><p>    &lt;Button</p><p>        </font>android:id=<font class="Fields">"@+id/btnSendSMS</p><p>        </font>android:layout_width=<font class="Fields">"match_parent</p><p>        </font>android:layout_height=<font class="Fields">"wrap_content</p><p>        </font>android:text=<font class="Fields">"鐩存帴鍙戦€?</font> /&gt;</p><p>&lt;/LinearLayout&gt;</p><p></pre></p><p>上面的代码包括两个输入框和一个按钮。</p><p>4、实现发短信方法</p><p>下面我们来实现发短信的方法。我们在主程序activity里，做如下三样事情：</p><p>1）绑定Button的onClick监听。</p><p>2）判断输入了要发短信的手机号码和短信内容。</p><p>3）写一个sendSMS()来实现发短信。</p><p><pre><font class="keyword">import </font>android.app.Activity;</p><p><font class="keyword">import </font>android.os.Bundle;</p><p><font class="keyword">import </font>android.app.PendingIntent;</p><p><font class="keyword">import </font>android.content.BroadcastReceiver;</p><p><font class="keyword">import </font>android.content.Context;</p><p><font class="keyword">import </font>android.content.Intent;</p><p><font class="keyword">import </font>android.content.IntentFilter;</p><p><font class="keyword">import </font>android.telephony.SmsManager;</p><p><font class="keyword">import </font>android.view.View;</p><p><font class="keyword">import </font>android.widget.Button;</p><p><font class="keyword">import </font>android.widget.EditText;</p><p><font class="keyword">import </font>android.widget.Toast;</p><p><font class="keyword">public </font><font class="keyword">class </font>Lesson2devActivity </font><font class="keyword">extends </font>Activity {</p><p>	Button btnSendSMS;</p><p>	EditText txtPhoneNo;</p><p>	EditText txtMessage;</p><p>	<font class="Comments">/** Called when the activity is first created. */</font></p><p>	@Override</p><p>	<font class="keyword">public </font><font class="keyword">void </font>onCreate(Bundle savedInstanceState) {</p><p>		<font class="keyword">super</font>.onCreate(savedInstanceState);</p><p>		setContentView(R.layout.main);</p><p>		btnSendSMS = (Button) findViewById(R.id.btnSendSMS);</p><p>		txtPhoneNo = (EditText) findViewById(R.id.txtPhoneNo);</p><p>		txtMessage = (EditText) findViewById(R.id.txtMessage);</p><p>		<font class="Comments">// 创建listener</font></p><p>		</font>btnSendSMS.setOnClickListener(<font class="keyword">new </font>View.OnClickListener() {</p><p>			<font class="keyword">public </font><font class="keyword">void </font>onClick(View v) {</p><p>				String phoneNo = txtPhoneNo.getText().toString();</p><p>				String message = txtMessage.getText().toString();</p><p>				<font class="keyword">if </font>(phoneNo.length() &gt; 0 && message.length() &gt; 0)</p><p>					sendSMS1(phoneNo, message);</p><p>				else</p><p>					Toast.makeText(getBaseContext(),</p><p>							<font class="Fields">"Please enter both phone number and message."</font>,</p><p>							Toast.LENGTH_SHORT).show();</p><p>			}</p><p>		});</p><p>	}</p><p>}</p><p></pre></p><p>其中sendSMS()方法代码如下：</p><p><pre><font class="Comments">// ---sends an SMS message to another device---</font></p><p><font class="keyword">private </font><font class="keyword">void </font>sendSMS(String phoneNumber, String message) {</p><p>	</font>PendingIntent pi = PendingIntent.getActivity(<font class="keyword">this</font>, 0, </font><font class="keyword">new </font>Intent(</font><font class="keyword">this</font>,</p><p>			</font>SMS.<font class="keyword">class</font>), 0);</p><p>	SmsManager sms = SmsManager.getDefault();</p><p>	</font>sms.sendTextMessage(phoneNumber, <font class="keyword">null</font>, message, pi, </font><font class="keyword">null</font>);</p><p>}</p><p></pre></p><p>我们用SmsManager这个类来发送短信。你不需要直接对这个类进行实例化，只需要调用其getDefault()静态方法来获得一个SmsManager对象。然后通过其sendTextMessage()方法来发送短信。该方法调用参数为PendingIntent类型，PendingIntent这个类用于处理即将发生的事件而不是立即执行，也就是不一定由本对象来触发执行。</p><p>下面我们对这个sendSMS方法进行完善：</p><p>如果你需要监控这个发送短信的状态，你可以使用两个PendingIntent对象，通过两个BroadcastReceiver来实现：</p><p><pre><font class="Comments">// ---sends an SMS message to another device---</font></p><p><font class="keyword">private </font><font class="keyword">void </font>sendSMS(String phoneNumber, String message) {</p><p>	</font>String SENT = <font class="Fields">"SMS_SENT"</font>;</p><p>	</font>String DELIVERED = <font class="Fields">"SMS_DELIVERED"</font>;</p><p>	</font>PendingIntent sentPI = PendingIntent.getBroadcast(<font class="keyword">this</font>, 0, </font><font class="keyword">new </font>Intent(</p><p>			SENT), 0);</p><p>	</font>PendingIntent deliveredPI = PendingIntent.getBroadcast(<font class="keyword">this</font>, 0,</p><p>			<font class="keyword">new </font>Intent(DELIVERED), 0);</p><p>	<font class="Comments">// ---when the SMS has been sent---</font></p><p>	</font>registerReceiver(<font class="keyword">new </font>BroadcastReceiver() {</p><p>		@Override</p><p>		<font class="keyword">public </font><font class="keyword">void </font>onReceive(Context arg0, Intent arg1) {</p><p>			<font class="keyword">switch </font>(getResultCode()) {</p><p>			<font class="keyword">case </font>Activity.RESULT_OK:</p><p>				</font>Toast.makeText(getBaseContext(), <font class="Fields">"SMS sent"</font>,</p><p>						Toast.LENGTH_SHORT).show();</p><p>				<font class="keyword">break</font>;</p><p>			<font class="keyword">case </font>SmsManager.RESULT_ERROR_GENERIC_FAILURE:</p><p>				</font>Toast.makeText(getBaseContext(), <font class="Fields">"Generic failure"</font>,</p><p>						Toast.LENGTH_SHORT).show();</p><p>				<font class="keyword">break</font>;</p><p>			<font class="keyword">case </font>SmsManager.RESULT_ERROR_NO_SERVICE:</p><p>				</font>Toast.makeText(getBaseContext(), <font class="Fields">"No service"</font>,</p><p>						Toast.LENGTH_SHORT).show();</p><p>				<font class="keyword">break</font>;</p><p>			<font class="keyword">case </font>SmsManager.RESULT_ERROR_NULL_PDU:</p><p>				</font>Toast.makeText(getBaseContext(), <font class="Fields">"Null PDU"</font>,</p><p>						Toast.LENGTH_SHORT).show();</p><p>				<font class="keyword">break</font>;</p><p>			<font class="keyword">case </font>SmsManager.RESULT_ERROR_RADIO_OFF:</p><p>				</font>Toast.makeText(getBaseContext(), <font class="Fields">"Radio off"</font>,</p><p>						Toast.LENGTH_SHORT).show();</p><p>				<font class="keyword">break</font>;</p><p>			}</p><p>		}</p><p>	</font>}, <font class="keyword">new </font>IntentFilter(SENT));</p><p>	<font class="Comments">// ---when the SMS has been delivered---</font></p><p>	</font>registerReceiver(<font class="keyword">new </font>BroadcastReceiver() {</p><p>		@Override</p><p>		<font class="keyword">public </font><font class="keyword">void </font>onReceive(Context arg0, Intent arg1) {</p><p>			<font class="keyword">switch </font>(getResultCode()) {</p><p>			<font class="keyword">case </font>Activity.RESULT_OK:</p><p>				</font>Toast.makeText(getBaseContext(), <font class="Fields">"SMS delivered"</font>,</p><p>						Toast.LENGTH_SHORT).show();</p><p>				<font class="keyword">break</font>;</p><p>			<font class="keyword">case </font>Activity.RESULT_CANCELED:</p><p>				</font>Toast.makeText(getBaseContext(), <font class="Fields">"SMS not delivered"</font>,</p><p>						Toast.LENGTH_SHORT).show();</p><p>				<font class="keyword">break</font>;</p><p>			}</p><p>		}</p><p>	</font>}, <font class="keyword">new </font>IntentFilter(DELIVERED));</p><p>	SmsManager sms = SmsManager.getDefault();</p><p>	</font>sms.sendTextMessage(phoneNumber, <font class="keyword">null</font>, message, sentPI, deliveredPI);</p><p>}</p><p></pre></p><p>上述代码用一个sentPI的PendingIntent对象来监控短信发送的状态，当一个短信发出去之后，第一个BroadcastReceiver的onReceive事件就会被激活，这个Receiver就会监听事件的状态。第二个deliveredPI用来监控短信收到的状态，当短信被收到后，第二个BroadcastReceiver的onReceive事件会激活。</p><p>5、功能测试</p><p>现在你可以在Eclipse上按F11来进行程序的仿真器上测试。</p><p>按下F11后，会弹出仿真器并打开你的程序。我们在输入框输入相应的信息，点击发送，会显示发送成功。</p><p>我们会发现，在仿真器能收到”SMS sent”的信息，但是收不到”SMS delivered”的信息。这是因为后者的监听只会在真机上出现，仿真器上不会出现。</p><p>在这个时候，我们可以再打开一个仿真器来测试两个仿真器之间互发短信。</p><p>如何打开一个仿真器？在路径\android-sdk-windows\tools\emulator.exe，打开这个emulator即可，仿真器的号码是窗口抬头，一般是5556～5558之类的。大家来互发试试。</p><p>6、另外一个发短信的方法</p><p>另外一种方法：调用android系统自身的SMS功能。代码如下：</p><p><pre><font class="keyword">private </font><font class="keyword">void </font>sendSMS(String phoneNumber, String message) {</p><p>	</font>Intent sendIntent = <font class="keyword">new </font>Intent(Intent.ACTION_VIEW);</p><p>	</font>sendIntent.putExtra(<font class="Fields">"sms_body"</font>, message);</p><p>	</font>sendIntent.putExtra(<font class="Fields">"address"</font>, phoneNumber);</p><p>	</font>sendIntent.setType(<font class="Fields">"vnd.android-dir/mms-sms"</font>);</p><p>	startActivity(sendIntent);</p><p>}</p><p></pre></p><p>这里，我们通过intent来调用android系统自身的SMS功能，主要是通过设置intent的类型和输入参数即可。这个程序还可以作为短信预览功能。</p><p>二、收短信功能</p><p>除了发短信，我们还要做收短信功能。这里可以通过BroadcastReceiver对象来实现收短信。</p><p>1、注册receiver</p><p>首先我们在AndroidManifest.xml中增加&lt;receiver&gt;字段：</p><p><pre>&lt;?xml version =<font class="Fields">"1.0"</font> encoding =</font><font class="Fields">"utf-8"</font>?&gt;</p><p>&lt;manifest xmlns:android=<font class="Fields">"http:<font class="Comments">//schemas.android.com/apk/res/android</font></p><p>    </font>package=<font class="Fields">"net.learn2develop.SMSMessaging</p><p>    </font>android:versionCode=<font class="Fields">"1</p><p>    </font>android:versionName=<font class="Fields">"1.0.0"</font> &gt;</p><p>    &lt;application</p><p>        </font>android:icon=<font class="Fields">"@drawable/icon</p><p>        </font>android:label=<font class="Fields">"@string/app_name"</font> &gt;</p><p>        &lt;activity</p><p>            </font>android:name=<font class="Fields">".SMS</p><p>            </font>android:label=<font class="Fields">"@string/app_name"</font> &gt;</p><p>            &lt;intent-filter&gt;</p><p>                </font>&lt;action android:name=<font class="Fields">"android.intent.action.MAIN"</font> /&gt;</p><p>                </font>&lt;category android:name=<font class="Fields">"android.intent.category.LAUNCHER"</font> /&gt;</p><p>            &lt;/intent-filter&gt;</p><p>        &lt;/activity&gt;</p><p>        </font>&lt;receiver android:name=<font class="Fields">".SmsReceiver"</font> &gt;</p><p>            &lt;intent-filter&gt;</p><p>                </font>&lt;action android:name=<font class="Fields">"android.provider.Telephony.SMS_RECEIVED"</font> /&gt;</p><p>            &lt;/intent-filter&gt;</p><p>        &lt;/receiver&gt;</p><p>    &lt;/application&gt;</p><p>    </font>&lt;uses-permission android:name=<font class="Fields">"android.permission.SEND_SMS"</font> &gt;</p><p>    &lt;/uses-permission&gt;</p><p>    </font>&lt;uses-permission android:name=<font class="Fields">"android.permission.RECEIVE_SMS"</font> &gt;</p><p>    &lt;/uses-permission&gt;</p><p>&lt;/manifest&gt;</p><p></pre></p><p>2、新增SmsReceiver.java</p><p>在原有项目中增加一个类文件SmsReceiver.java。这个类继承BroadcastReceiver并重写onReceiver()方法。</p><p><pre><font class="keyword">import </font>android.content.BroadcastReceiver;</p><p><font class="keyword">import </font>android.content.Context;</p><p><font class="keyword">import </font>android.content.Intent;</p><p><font class="keyword">import </font>android.os.Bundle;</p><p><font class="keyword">import </font>android.telephony.SmsMessage;</p><p><font class="keyword">import </font>android.widget.Toast;</p><p><font class="keyword">public </font><font class="keyword">class </font>SmsReceiver </font><font class="keyword">extends </font>BroadcastReceiver {</p><p>	@Override</p><p>	<font class="keyword">public </font><font class="keyword">void </font>onReceive(Context context, Intent intent) {</p><p>		<font class="Comments">// ---get the SMS message passed in---</font></p><p>		Bundle bundle = intent.getExtras();</p><p>		</font>SmsMessage[] msgs = <font class="keyword">null</font>;</p><p>		</font>String str = <font class="Fields">""</font>;</p><p>		<font class="keyword">if </font>(bundle != </font><font class="keyword">null</font>) {</p><p>			<font class="Comments">// ---retrieve the SMS message received---</font></p><p>			</font>Object[] pdus = (Object[]) bundle.get(<font class="Fields">"pdus"</font>);</p><p>			</font>msgs = <font class="keyword">new </font>SmsMessage[pdus.length];</p><p>			<font class="keyword">for </font>(</font><font class="keyword">int </font>i = 0; i &lt; msgs.length; i++) {</p><p>				msgs[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);</p><p>				</font>str += <font class="Fields">"SMS from "</font> + msgs[i].getOriginatingAddress();</p><p>				</font>str += <font class="Fields">" :"</font>;</p><p>				str += msgs[i].getMessageBody().toString();</p><p>				</font>str += <font class="Fields">"/n "</font>;</p><p>			}</p><p>			<font class="Comments">// ---display the new SMS message---</font></p><p>			Toast.makeText(context, str, Toast.LENGTH_SHORT).show();</p><p>		}</p><p>	}</p><p>}</p><p></pre></p><p>当有短信到达的时候，SmsReceiver类的onCreate()就会被激活。</p><p>这是如何做到的呢？我们在前面做了一个注册Receiver的步骤，其实BroadcastReceiver既可以在资源AndroidManifest.xml中注册，也可以在代码中通过Context.registerReceiver()进行注册。只要是注册了，当该事件来临的时候，即时程序没有启动，系统也在需要的时候会自动启动此应用程序。也就能够响应相应事件了。</p><p>在这个程序里，是在AndroidManifest.xml中增加的&lt;receiver&gt;来关联的（android:name的命名要跟类命名一致）。</p><p>在android系统上，当收到了一条SMS短信，它其实是一个intent对象，经由Bundle附着在一个intent对象里（就是onReceive()方法的第二个参数）。这个短信会保存在一个以PDU格式为对象的数组中。为了获取短信息的内容，我们使用了SmsMessage类里面的createFromPdu()这个静态方法。</p><p>最后我们把短信内容呈现出来。</p><p>这样就可以了！大家用仿真器来测试下。</p><p></p></div>

</DIV></DIV>

<DIV id=footer style="display:none">
<P align="center">  
 
 
 
    </P>
</DIV></BODY></HTML>

