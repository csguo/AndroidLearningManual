
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML xmlns="http://www.w3.org/1999/xhtml">
<HEAD>
<TITLE>Android的传感器_Android学习手册</TITLE>
<META content="text/html; charset=gb2312" http-equiv=Content-Type><LINK  rel=stylesheet type=text/css href="../css/c5.css">
<META name=GENERATOR content="MSHTML 8.00.6001.18702">
<meta name="Description" content=Android基础 Android组件 Android用户界面 Android设备功能 Android数据存储 Android网络应用 Android游戏开发 Android多媒体 Android源码开发 Android高级进阶 Android面试题/>
<meta name="Keywords" content="android 学习手册">

</HEAD>
<BODY id=homesecond class=serverscripting>
<DIV id=wrapper>
<DIV id=header><h1><a href="../index.html">Android学习手册</a></h1> 
</DIV>

<DIV id=navfirst>
<div id="indexGuide"><UL><li ><A href="../basic/index.html">Android基础</A> </li><li ><A href="../component/index.html">Android组件</A> </li><li ><A href="../userinterface/index.html">用户界面</A> </li><li class="navcurrentLink"><A href="index.html">设备功能</A> </li><li ><A href="../datastorage/index.html">数据存储</A> </li><li ><A href="../network/index.html">网络应用</A> </li><li ><A href="../game/index.html">游戏开发</A> </li><li ><A href="../multimedia/index.html">多媒体</A> </li><li ><A href="../source/index.html">源码开发</A> </li><li ><A href="../advance/index.html">高级进阶</A> </li><li ><A href="../interview/index.html">Android面试题</A> </li></UL></div>
</DIV>
<DIV id=navsecond>
<DIV id=course>
<div id="kcTitle">课 程 表</div>


  <h2><A title="设备信息" href="index_157.html">设备信息</A></h2>

  <h2><A title="摄像头" href="index_158.html">摄像头</A></h2>

  <h2><A title="通讯录" href="index_159.html">通讯录</A></h2>

  <h2><A title="电话" href="index_160.html">电话</A></h2>

  <h2><A title="短信" href="index_161.html">短信</A></h2>

  <h2><A title="传感器" href="index_162.html">传感器</A></h2>
<UL><li class="currentLink"><A title=Android的传感器 href="show_501_162.html">Android的传感器</A> </li><li ><A title=关于传感器的使用 href="show_502_162.html">关于传感器的使用</A> </li><li ><A title=方向SensorOrientation传感器功能实现 href="show_503_162.html">方向SensorOrientation传感器功能实现</A> </li><li ><A title=加速度Accelerometer功能源码 href="show_504_162.html">加速度Accelerometer功能源码</A> </li><li ><A title=Android 光传感器 href="show_505_162.html">Android 光传感器</A> </li><li ><A title=Android 磁场传感器 href="show_506_162.html">Android 磁场传感器</A> </li><li ><A title=磁场Magnetic Field源码与示例 href="show_507_162.html">磁场Magnetic Field源码与示例</A> </li><li ><A title=近距离感应Proximity功能源码 href="show_508_162.html">近距离感应Proximity功能源码</A> </li><li ><A title=Android 温度传感器 href="show_509_162.html">Android 温度传感器</A> </li><li ><A title=温度传感器SensorTemperature功能源码 href="show_510_162.html">温度传感器SensorTemperature功能源码</A> </li><li ><A title=Sensor传感器源码的阅读与应用开发简单实例 href="show_511_162.html">Sensor传感器源码的阅读与应用开发简单实例</A> </li><li ><A title=Android 开发中传感器使用实例 href="show_512_162.html">Android 开发中传感器使用实例</A> </li><li ><A title=Android 游戏中的传感器 href="show_513_162.html">Android 游戏中的传感器</A> </li><li ><A title=利用SensorSimulator进行传感器的模拟 href="show_514_162.html">利用SensorSimulator进行传感器的模拟</A> </li></UL>
  <h2><A title="定位" href="index_163.html">定位</A></h2>

  <h2><A title="视频系统" href="index_164.html">视频系统</A></h2>

  <h2><A title="音频系统" href="index_165.html">音频系统</A></h2>

  <h2><A title="铃声" href="index_166.html">铃声</A></h2>

  <h2><A title="音量" href="index_167.html">音量</A></h2>

  <h2><A title="录音" href="index_168.html">录音</A></h2>

  <h2><A title="输入法" href="index_169.html">输入法</A></h2>

</DIV></DIV>
<DIV id=maincontent>
<DIV id=w3school>
<H1></H1>
<P><STRONG></STRONG></P></DIV>

<DIV>
<H2>Android的传感器</H2>
<div style="line-height:20px; font-size:14px;"><p style="color:#3333FF;">传感器的定义</p><p>传感器是一种物理装置或生物器官，能够探测、感受外界的信号、物理条件(如光、热、湿度)或化学组成(如烟雾)，并将探知的信息传递给其他装置或器官。国家标准GB7665-87对传感器的定义是："能感受规定的被测量并按照一定的规律转换成可用信号的器件或装置，通常由敏感元件和转换元件组成"。传感器是一种检测装置，能感受被测量的信息，并能将检测的感受到的信息，按一定规律变换成为电信号或其他所需形式的信息输出，以满足信息的传输、处理、存储、显示、记录和控制等要求。它是实现自动检测和自动控制的首要环节。</p><p style="color:#3333FF;">传感器的种类</p><p>可以从不同的角度对传感器进行分类：转换原理(传感器工作的基本物理或化学效应)；用途；输出信号类型以及制作材料和工艺等。</p><p>根据工作原理，传感器可分为物理传感器和化学传感器两大类。</p><p>物理传感器应用的是物理效应，诸如压电效应，磁致伸缩现象，离化、极化、热电、光电、磁电等效应。被测信号量的微小变化都将转换成电信号。</p><p>化学传感器包括那些以化学吸附、电化学反应等现象为因果关系的传感器，被测信号量的微小变化也将转换成电信号。</p><p>大多数传感器是以物理原理为基础运作的。化学传感器的技术问题较多，例如可靠性问题、规模生产的可能性、价格问题等，解决了这些问题，化学传感器的应用将会有巨大增长。而有些传感器既不能划分为物理类，也不能划分为化学类。</p><p style="color:#3333FF;">Android中传感器的种类</p><p>Google Android操作系统中内置了很多传感器，在部分游戏或软件中可以自动识别屏幕的横屏、竖屏方向来改变屏幕显示布局。下面是Android中支持的几种传感器：</p><p><pre>SeNSor.TYPE_ACCELEROMETER：加速度传感器。</p><p>Sensor.TYPE_GYROSCOPE：陀螺仪传感器。</p><p>Sensor.TYPE_LIGHT：亮度传感器。</p><p>Sensor.TYPE_MAGNETIC_FIELD：地磁传感器。</p><p>Sensor.TYPE_ORIENTATION：方向传感器。</p><p>Sensor.TYPE_PRESSURE：压力传感器。</p><p>Sensor.TYPE_PROXIMITY：近程传感器。</p><p>Sensor.TYPE_TEMPERATURE：温度传感器。</p><p></pre></p><p>下面我们通过一个例子来分析Android中传感器的使用，这里分析的是方向传感器(TYPE_ORIENTATION)。</p><p style="color:#3333FF;">Android 中传感器的功能</p><p>要在Android中使用传感器，首先需要了解SensorManager和SensorEventListener。顾名思义，SensorManager就是所有传感器的一个综合管理类，包括了传感器的种类、采样率、精准度等。我们可以通过getSystemService方法来取得一个SensorManager对象。代码如下：</p><p>SensorManager mSensorManager = (SensorManager)getSystemService(SENSOR_SERVICE)；</p><p>取得SensorManager对象之后，可以通过getSensorList方法来获得我们需要的传感器类型，保存到一个传感器列表中。通过如下代码可以得到一个方向传感器：</p><p>List sensors = mSensorManager.getSensorList(Sensor。TYPE_ORIENTATION)；</p><p>要与传感器交互，应用程序必须注册以侦听与一个或多个传感器相关的活动。Android中提供了registerListener来注册一个传感器，并提供了unregisterListener来卸载一个传感器。registerListener方法包括3个参数：第1个参数，接收信号的Listener实例；第2个参数，想接收的传感器类型的列表(即上一步创建的List对象)；第3个参数，接收频度。调用之后返回一个布尔值，true表示成功，false表示失败。</p><p>代码如下：</p><p><pre><font class="Comments">//注册传感器</font></p><p>Boolean mRegisteredSensor = mSensorManager.registerListener(<font class="keyword">this</font>, sensor,SensorManager.SENSOR_DELAY_FASTEST);</p><p><font class="Comments">//卸载传感器</font></p><p>mSensorManager.unregisterListener(<font class="keyword">this</font>);</p><p></pre></p><p>onSensorChanged(SensorEvent event)方法在传感器值更改时调用。该方法只由受此应用程序监视的传感器调用。该方法的参数包括一个SensorEvent对象，该对象主要包括一组浮点数，表示传感器获得的方向、加速度等信息。例如，以下代码可以取得其值：</p><p><pre><font class="keyword">float </font>x = event.values[SensorManager.DATA_X];</p><p><font class="keyword">float </font>y = event.values[SensorManager.DATA_Y];</p><p><font class="keyword">float </font>z = event.values[SensorManager.DATA_Z];</p><p></pre></p><p>onAccuracyChanged(Sensor sensor,int accuracy)方法在传感器的精准度发生改变时调用。其参数包括两个整数：一个表示传感器，另一个表示该传感器新的准确值。</p><p><pre><font class="keyword">public </font><font class="keyword">class </font>Activity01 </font><font class="keyword">extends </font>Activity </font><font class="keyword">implements </font>SensorEventListener</p><p>{</p><p>	<font class="keyword">private </font><font class="keyword">boolean </font>mRegisteredSensor;</p><p>	<font class="Comments">// 定义SensorManager</font></p><p>	<font class="keyword">private </font>SensorManager mSensorManager;</p><p>	<font class="keyword">public </font><font class="keyword">void </font>onCreate(Bundle savedInstanceState)</p><p>	{</p><p>		<font class="keyword">super</font>.onCreate(savedInstanceState);</p><p>		setContentView(R.layout.main);</p><p>		</font>mRegisteredSensor = <font class="keyword">false</font>;</p><p>		<font class="Comments">// 取得SensorManager实例</font></p><p>		mSensorManager = (SensorManager) getSystemService(SENSOR_SERVICE);</p><p>	}</p><p>	<font class="keyword">protected </font><font class="keyword">void </font>onResume()</p><p>	{</p><p>		<font class="keyword">super</font>.onResume();</p><p>		<font class="Comments">// 接收SensorManager的一个列表(Listener)</font></p><p>		<font class="Comments">// 这里我们指定类型为TYPE_ORIENTATION(方向传感器)</font></p><p>		List sensors = mSensorManager.getSensorList</p><p>		(Sensor.TYPE_ORIENTATION);</p><p>		<font class="keyword">if </font>(sensors.size() &gt; 0)</p><p>		{</p><p>			Sensor sensor = sensors.get(0);</p><p>			<font class="Comments">// 注册SensorManager</font></p><p>			<font class="Comments">// this-&gt;接收sensor的实例</font></p><p>			<font class="Comments">// 接收传感器类型的列表</font></p><p>			<font class="Comments">// 接收的频率</font></p><p>			</font>mRegisteredSensor = mSensorManager.registerListener(<font class="keyword">this</font>,</p><p>			sensor, SensorManager.SENSOR_DELAY_FASTEST);</p><p>		}</p><p>	}</p><p>	<font class="keyword">protected </font><font class="keyword">void </font>onPause()</p><p>	{</p><p>		<font class="keyword">if </font>(mRegisteredSensor)</p><p>		{</p><p>			<font class="Comments">// 如果调用了registerListener</font></p><p>			<font class="Comments">// 这里我们需要unregisterListener来卸载/取消注册</font></p><p>			</font>mSensorManager.unregisterListener(<font class="keyword">this</font>);</p><p>			</font>mRegisteredSensor = <font class="keyword">false</font>;</p><p>		}</p><p>		<font class="keyword">super</font>.onPause();</p><p>	}</p><p>	<font class="Comments">// 当精准度发生改变时</font></p><p>	<font class="Comments">// sensor-&gt;传感器</font></p><p>	<font class="Comments">// accuracy-&gt;精准度</font></p><p>	<font class="keyword">public </font><font class="keyword">void </font>onAccuracyChanged(Sensor sensor, </font><font class="keyword">int </font>accuracy) {</p><p>		<font class="Comments">// 处理精准度改变</font></p><p>	}</p><p>	<font class="Comments">// 当传感器在被改变时触发</font></p><p>	<font class="keyword">public </font><font class="keyword">void </font>onSensorChanged(SensorEvent event)</p><p>	{</p><p>		<font class="Comments">// 接收方向传感器的类型</font></p><p>		<font class="keyword">if </font>(event.sensor.getType() == Sensor.TYPE_ORIENTATION) {</p><p>			<font class="Comments">// 这里我们可以得到数据，然后根据需要来处理</font></p><p>			<font class="Comments">// 由于模拟器上面无法测试效果，因此我们暂时不处理数据</font></p><p>			<font class="keyword">float </font>x = event.values[SensorManager.DATA_X];</p><p>			<font class="keyword">float </font>y = event.values[SensorManager.DATA_Y];</p><p>			<font class="keyword">float </font>z = event.values[SensorManager.DATA_Z];</p><p>		}</p><p>	}</p><p>}</p><p></pre></p><p></p></div>

</DIV></DIV>

<DIV id=footer style="display:none">
<P align="center">  
 
 
 
    </P>
</DIV></BODY></HTML>

