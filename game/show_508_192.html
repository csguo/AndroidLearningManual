
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML xmlns="http://www.w3.org/1999/xhtml">
<HEAD>
<TITLE>【Android2D游戏开发之八】游戏音频_Android学习手册</TITLE>
<META content="text/html; charset=gb2312" http-equiv=Content-Type><LINK  rel=stylesheet type=text/css href="../css/c5.css">
<META name=GENERATOR content="MSHTML 8.00.6001.18702">
<meta name="Description" content=Android基础 Android组件 Android用户界面 Android设备功能 Android数据存储 Android网络应用 Android游戏开发 Android多媒体 Android源码开发 Android高级进阶 Android面试题/>
<meta name="Keywords" content="android 学习手册">

</HEAD>
<BODY id=homesecond class=serverscripting>
<DIV id=wrapper>
<DIV id=header><h1><a href="../index.html">Android学习手册</a></h1> 
</DIV>

<DIV id=navfirst>
<div id="indexGuide"><UL><li ><A href="../basic/index.html">Android基础</A> </li><li ><A href="../component/index.html">Android组件</A> </li><li ><A href="../userinterface/index.html">用户界面</A> </li><li ><A href="../device/index.html">设备功能</A> </li><li ><A href="../datastorage/index.html">数据存储</A> </li><li ><A href="../network/index.html">网络应用</A> </li><li class="navcurrentLink"><A href="index.html">游戏开发</A> </li><li ><A href="../multimedia/index.html">多媒体</A> </li><li ><A href="../source/index.html">源码开发</A> </li><li ><A href="../advance/index.html">高级进阶</A> </li><li ><A href="../interview/index.html">Android面试题</A> </li></UL></div>
</DIV>
<DIV id=navsecond>
<DIV id=course>
<div id="kcTitle">课 程 表</div>


  <h2><A title="游戏开发须知" href="index_187.html">游戏开发须知</A></h2>

  <h2><A title="游戏策划、设计分析" href="index_188.html">游戏策划、设计分析</A></h2>

  <h2><A title="Android OpenGL学习" href="index_190.html">Android OpenGL学习</A></h2>

  <h2><A title="Android游戏开发之旅" href="index_191.html">Android游戏开发之旅</A></h2>

  <h2><A title="Android2D游戏开发" href="index_192.html">Android2D游戏开发</A></h2>
<UL><li ><A title=【Android2D游戏开发之一】设置全屏以及绘画简单的图形 href="show_501_192.html">【Android2D游戏开发之一】设置全屏以及绘画简单的图形</A> </li><li ><A title=【Android2D游戏开发之二】剖析游戏开发用view还是sarfaceView？ href="show_502_192.html">【Android2D游戏开发之二】剖析游戏开发用view还是sarfaceView？</A> </li><li ><A title=【Android2D游戏开发之三】剖析 SurfaceView ！ Callback以及SurfaceHol href="show_503_192.html">【Android2D游戏开发之三】剖析 SurfaceView ！ Callback以及SurfaceHol</A> </li><li ><A title=【Android2D游戏开发之四】Android 游戏框架（游戏角色行走demo) href="show_504_192.html">【Android2D游戏开发之四】Android 游戏框架（游戏角色行走demo)</A> </li><li ><A title=【Android2D游戏开发之五】游戏注册界面,两个Activity切换交互 href="show_505_192.html">【Android2D游戏开发之五】游戏注册界面,两个Activity切换交互</A> </li><li ><A title=【Android2D游戏开发之六】在SurfaceView中添加组件！并交互数据 href="show_506_192.html">【Android2D游戏开发之六】在SurfaceView中添加组件！并交互数据</A> </li><li ><A title=【Android2D游戏开发之七】游戏开发样式!再剖析SurfaceView组件 href="show_507_192.html">【Android2D游戏开发之七】游戏开发样式!再剖析SurfaceView组件</A> </li><li class="currentLink"><A title=【Android2D游戏开发之八】游戏音频 href="show_508_192.html">【Android2D游戏开发之八】游戏音频</A> </li><li ><A title=【Android2D游戏开发之九】触屏Bug解决方案及禁止横竖屏切换! href="show_509_192.html">【Android2D游戏开发之九】触屏Bug解决方案及禁止横竖屏切换!</A> </li><li ><A title=【Android2D游戏开发之十】详细剖析Android Traceview效率检视工具 href="show_510_192.html">【Android2D游戏开发之十】详细剖析Android Traceview效率检视工具</A> </li><li ><A title=【Android2D游戏开发十一】手把手让你爱上Android “9妹” href="show_511_192.html">【Android2D游戏开发十一】手把手让你爱上Android “9妹”</A> </li><li ><A title=【Android2D游戏开发十二】详解SharedPreference,FIle将数据存到SD卡 href="show_512_192.html">【Android2D游戏开发十二】详解SharedPreference,FIle将数据存到SD卡</A> </li><li ><A title=【Android2D游戏开发十三】详解SQLite，并把数据库文件存SD卡中-2 href="show_513_192.html">【Android2D游戏开发十三】详解SQLite，并把数据库文件存SD卡中-2</A> </li><li ><A title=【Android2D游戏开发十四】在SurfaceView中照样使用Animation(下) href="show_514_192.html">【Android2D游戏开发十四】在SurfaceView中照样使用Animation(下)</A> </li><li ><A title=【Android2D游戏开发十五】游戏触屏事件的性能优化笔记！ href="show_515_192.html">【Android2D游戏开发十五】游戏触屏事件的性能优化笔记！</A> </li><li ><A title=【Android2D游戏开发十六】详解Gesture 手势操作！实现切换图片 href="show_516_192.html">【Android2D游戏开发十六】详解Gesture 手势操作！实现切换图片</A> </li><li ><A title=【Android2D游戏开发十七】输入法手势技术,自定义手势玩游戏 href="show_517_192.html">【Android2D游戏开发十七】输入法手势技术,自定义手势玩游戏</A> </li><li ><A title=【Android2D游戏开发十八】解放手指,利用传感器开发游戏！ href="show_518_192.html">【Android2D游戏开发十八】解放手指,利用传感器开发游戏！</A> </li><li ><A title=【Android2D游戏开发十九】(必看篇)剖析Back与Home键及异常处理 href="show_519_192.html">【Android2D游戏开发十九】(必看篇)剖析Back与Home键及异常处理</A> </li><li ><A title=【Android2D游戏开发二十】物理游戏之重力系统开发 href="show_520_192.html">【Android2D游戏开发二十】物理游戏之重力系统开发</A> </li><li ><A title=【Android2D游戏开发二十一】Android设备谎言分辨率的解决方案 href="show_521_192.html">【Android2D游戏开发二十一】Android设备谎言分辨率的解决方案</A> </li><li ><A title=【Android游戏开发二十二】详解游戏中如何灵活实现动画播放! href="show_522_192.html">【Android游戏开发二十二】详解游戏中如何灵活实现动画播放!</A> </li><li ><A title=【Android游戏开发二十三】自定义【通用】ListView适配器 href="show_523_192.html">【Android游戏开发二十三】自定义【通用】ListView适配器</A> </li><li ><A title=【Android游戏开发二十四】360°平滑游戏摇杆 href="show_524_192.html">【Android游戏开发二十四】360°平滑游戏摇杆</A> </li><li ><A title=【Android游戏开发二十五】Android平台使用《贝赛尔曲线》！ href="show_525_192.html">【Android游戏开发二十五】Android平台使用《贝赛尔曲线》！</A> </li><li ><A title=【Android游戏开发二十六】追加简述SurfaceView 与 GLSurfaceView效 href="show_526_192.html">【Android游戏开发二十六】追加简述SurfaceView 与 GLSurfaceView效</A> </li></UL>
  <h2><A title="Android经典实例教程解析" href="index_193.html">Android经典实例教程解析</A></h2>

  <h2><A title="Android游戏开发实例" href="index_194.html">Android游戏开发实例</A></h2>

  <h2><A title="Libgdx游戏引擎" href="index_195.html">Libgdx游戏引擎</A></h2>

</DIV></DIV>
<DIV id=maincontent>
<DIV id=w3school>
<H1></H1>
<P><STRONG></STRONG></P></DIV>

<DIV>
<H2>【Android2D游戏开发之八】游戏音频</H2>
<div style="line-height:20px; font-size:14px;"><p>游戏开发中,通过资料和书籍了解到在有两种播放音频形式可以用在我们的游戏开发中,第一个：MediaPlayer 类 ；第二个：SoundPool 类!</p><p>PS:当然还有一个JetPlayer 但是播放的文件格式比较麻烦，所以这里抛开不解释，有兴趣的可以去自己研究下、呵呵;</p><p>运行效果图：</p><p><img src="../img/games_2d/08_2dgames.jpg"></p><p>MediaPlayer 和：SoundPool 类!那么他们之间的利弊各是什么呢？或者说，我们游戏开发到底用哪一个更佳呢？答案就是：两者都必须要！！！分析利弊与各自的用途后,等各位童鞋熟习每个播放形式实现之后我会详细道来！ </p><p>下面仍然是先上代码：(先看代码，然后我讲解两个播放形式的利弊关系和各个用途以及其中解释代码中的几个备注!)</p><p><pre><font class="keyword">import </font>java.util.HashMap;</p><p><font class="keyword">import </font>android.content.Context;</p><p><font class="keyword">import </font>android.graphics.Canvas;</p><p><font class="keyword">import </font>android.graphics.Color;</p><p><font class="keyword">import </font>android.graphics.Paint;</p><p><font class="keyword">import </font>android.media.AudioManager;</p><p><font class="keyword">import </font>android.media.MediaPlayer;</p><p><font class="keyword">import </font>android.media.SoundPool;</p><p><font class="keyword">import </font>android.view.KeyEvent;</p><p><font class="keyword">import </font>android.view.MotionEvent;</p><p><font class="keyword">import </font>android.view.SurfaceHolder;</p><p><font class="keyword">import </font>android.view.SurfaceView;</p><p><font class="keyword">import </font>android.view.SurfaceHolder.Callback;</p><p><font class="keyword">public </font><font class="keyword">class </font>MySurfaceView </font><font class="keyword">extends </font>SurfaceView </font><font class="keyword">implements </font>Callback, Runnable {</p><p>	<font class="keyword">private </font>Thread th;</p><p>	<font class="keyword">private </font>SurfaceHolder sfh;</p><p>	<font class="keyword">private </font>Canvas canvas;</p><p>	<font class="keyword">private </font>MediaPlayer player;</p><p>	<font class="keyword">private </font>Pa</font><font class="keyword">int </font>paint;</p><p>	<font class="keyword">private </font><font class="keyword">boolean </font>ON = </font><font class="keyword">true</font>;</p><p>	<font class="keyword">private </font><font class="keyword">int </font>currentVol, maxVol;</p><p>	<font class="keyword">private </font>AudioManager am;</p><p>	<font class="keyword">private </font>HashMap&lt;Integer, Integer&gt; soundPoolMap;<font class="Comments">// 备注1</font></p><p>	<font class="keyword">private </font><font class="keyword">int </font>loadId;</p><p>	<font class="keyword">private </font>SoundPool soundPool;</p><p>	<font class="keyword">public </font>MySurfaceView(Context context) {</p><p>		<font class="keyword">super</font>(context);</p><p>		<font class="Comments">// 获取音频服务然后强转成一个音频管理器,后面方便用来控制音量大小用</font></p><p>		am = (AudioManager) MainActivity.instance</p><p>				.getSystemService(Context.AUDIO_SERVICE);</p><p>		maxVol = am.getStreamMaxVolume(AudioManager.STREAM_MUSIC);</p><p>		<font class="Comments">// 获取最大音量值（15最大! .不是100！）</font></p><p>		</font>sfh = <font class="keyword">this</font>.getHolder();</p><p>		</font>sfh.addCallback(<font class="keyword">this</font>);</p><p>		</font>th = <font class="keyword">new </font>Thread(</font><font class="keyword">this</font>);</p><p>		<font class="keyword">this</font>.setKeepScreenOn(</font><font class="keyword">true</font>);</p><p>		</font>setFocusable(<font class="keyword">true</font>);</p><p>		</font>pa<font class="keyword">int </font>= </font><font class="keyword">new </font>Paint();</p><p>		</font>paint.setAntiAlias(<font class="keyword">true</font>);</p><p>		<font class="Comments">// MediaPlayer的初始化</font></p><p>		player = MediaPlayer.create(context, R.raw.himi);</p><p>		</font>player.setLooping(<font class="keyword">true</font>);<font class="Comments">// 设置循环播放</font></p><p>		<font class="Comments">// SoundPool的初始化</font></p><p>		</font>soundPool = <font class="keyword">new </font>SoundPool(4, AudioManager.STREAM_MUSIC, 100);</p><p>		</font>soundPoolMap = <font class="keyword">new </font>HashMap&lt;Integer, Integer&gt;();</p><p>		soundPoolMap.put(1,</p><p>				soundPool.load(MainActivity.content, R.raw.himi_ogg, 1));</p><p>		loadId = soundPool.load(context, R.raw.himi_ogg, 1);</p><p>		<font class="Comments">// load()方法的最后一个参数他标识优先考虑的声音。目前没有任何效果。使用了也只是对未来的兼容性价值。</font></p><p>	}</p><p>	<font class="keyword">public </font><font class="keyword">void </font>surfaceCreated(SurfaceHolder holder) {</p><p>		/*</p><p>		 <font class="Comments">* Android OS中，如果你去按手机上的调节音量的按钮，会分两种情况，</font></p><p>		 <font class="Comments">* 一种是调整手机本身的铃声音量，一种是调整游戏，软件，音乐播放的音量 当我们在游戏中的时候 ，总是想调整游戏的音量而不是手机的铃声音量，</font></p><p>		 <font class="Comments">* 可是烦人的问题又来了，我在开发中发现，只有游戏中有声音在播放的时候 ，你才能去调整游戏的音量，否则就是手机的音量，有没有办法让手机只要是</font></p><p>		 <font class="Comments">* 在运行游戏的状态就只调整游戏的音量呢？试试下面这段代码吧!</font></p><p>		 <font class="Comments">*/</font></p><p>		MainActivity.instance.setVolumeControlStream(AudioManager.STREAM_MUSIC);</p><p>		<font class="Comments">// 设定调整音量为媒体音量,当暂停播放的时候调整音量就不会再默认调整铃声音量了，娃哈哈</font></p><p></p><p>		player.start();</p><p>		th.start();</p><p>	}</p><p>	<font class="keyword">public </font><font class="keyword">void </font>draw() {</p><p>		canvas = sfh.lockCanvas();</p><p>		canvas.drawColor(Color.WHITE);</p><p>		paint.setColor(Color.RED);</p><p>		</font>canvas.drawText(<font class="Fields">"当前音量: "</font> + currentVol, 100, 40, pa<font class="keyword">int</font>);</p><p>		</font>canvas.drawText(<font class="Fields">"当前播放的时间"</font> + player.getCurrentPosition() + </font><font class="Fields">"毫秒"</font>, 100,</p><p>				</font>70, pa<font class="keyword">int</font>);</p><p>		</font>canvas.drawText(<font class="Fields">"方向键中间按钮切换 暂停/开始"</font>, 100, 100, pa<font class="keyword">int</font>);</p><p>		</font>canvas.drawText(<font class="Fields">"方向键←键快退5秒 "</font>, 100, 130, pa<font class="keyword">int</font>);</p><p>		</font>canvas.drawText(<font class="Fields">"方向键→键快进5秒 "</font>, 100, 160, pa<font class="keyword">int</font>);</p><p>		</font>canvas.drawText(<font class="Fields">"方向键↑键增加音量 "</font>, 100, 190, pa<font class="keyword">int</font>);</p><p>		</font>canvas.drawText(<font class="Fields">"方向键↓键减小音量"</font>, 100, 220, pa<font class="keyword">int</font>);</p><p>		sfh.unlockCanvasAndPost(canvas);</p><p>	}</p><p>	<font class="keyword">private </font><font class="keyword">void </font>logic() {</p><p>		currentVol = am.getStreamVolume(AudioManager.STREAM_MUSIC);<font class="Comments">// 不断获取当前的音量值</font></p><p>	}</p><p>	@Override</p><p>	<font class="keyword">public </font><font class="keyword">boolean </font>onKeyDown(</font><font class="keyword">int </font>key, KeyEvent event) {</p><p>		<font class="keyword">if </font>(key == KeyEvent.KEYCODE_DPAD_CENTER) {</p><p>			ON = !ON;</p><p>			<font class="keyword">if </font>(ON == </font><font class="keyword">false</font>)</p><p>				player.pause();</p><p>			else</p><p>				player.start();</p><p>		</font>} <font class="keyword">else </font><font class="keyword">if </font>(key == KeyEvent.KEYCODE_DPAD_UP) {<font class="Comments">// 按键这里本应该是RIGHT,但是因为当前是横屏模式,以下雷同</font></p><p>			player.seekTo(player.getCurrentPosition() + 5000);</p><p>		</font>} <font class="keyword">else </font><font class="keyword">if </font>(key == KeyEvent.KEYCODE_DPAD_DOWN) {</p><p>			<font class="keyword">if </font>(player.getCurrentPosition() &lt; 5000) {</p><p>				player.seekTo(0);</p><p>			</font>} <font class="keyword">else </font>{</p><p>				player.seekTo(player.getCurrentPosition() - 5000);</p><p>			}</p><p>		</font>} <font class="keyword">else </font><font class="keyword">if </font>(key == KeyEvent.KEYCODE_DPAD_LEFT) {</p><p>			currentVol += 1;</p><p>			<font class="keyword">if </font>(currentVol &gt; maxVol) {</p><p>				currentVol = 100;</p><p>			}</p><p>			am.setStreamVolume(AudioManager.STREAM_MUSIC, currentVol,<font class="Comments">// 备注2</font></p><p>					AudioManager.FLAG_PLAY_SOUND);</p><p>		</font>} <font class="keyword">else </font><font class="keyword">if </font>(key == KeyEvent.KEYCODE_DPAD_RIGHT) {</p><p>			currentVol -= 1;</p><p>			<font class="keyword">if </font>(currentVol &lt;= 0) {</p><p>				currentVol = 0;</p><p>			}</p><p>			am.setStreamVolume(AudioManager.STREAM_MUSIC, currentVol,</p><p>					AudioManager.FLAG_PLAY_SOUND);</p><p>		}</p><p>		soundPool.play(loadId, currentVol, currentVol, 1, 0, 1f);<font class="Comments">// 备注3</font></p><p>		<font class="Comments">// soundPool.play(soundPoolMap.get(1), currentVol, currentVol, 1, 0,</font></p><p>		<font class="Comments">// 1f);<font class="Comments">//备注4</font></p><p>		<font class="Comments">// soundPool.pause(1);<font class="Comments">//暂停SoundPool的声音</font></p><p>		<font class="keyword">return </font><font class="keyword">super</font>.onKeyDown(key, event);</p><p>	}</p><p>	@Override</p><p>	<font class="keyword">public </font><font class="keyword">boolean </font>onTouchEvent(MotionEvent event) {</p><p>		<font class="keyword">return </font><font class="keyword">true</font>;</p><p>	}</p><p>	<font class="keyword">public </font><font class="keyword">void </font>run() {</p><p>		<font class="keyword">while </font>(</font><font class="keyword">true</font>) {</p><p>			draw();</p><p>			logic();</p><p>			<font class="keyword">try </font>{</p><p>				Thread.sleep(100);</p><p>			</font>} <font class="keyword">catch </font>(Exception ex) {</p><p>			}</p><p>		}</p><p>	}</p><p>	<font class="keyword">public </font><font class="keyword">void </font>surfaceChanged(SurfaceHolder holder, </font><font class="keyword">int </font>format, </font><font class="keyword">int </font>width,</p><p>			<font class="keyword">int </font>height) {</p><p>	}</p><p></p><p>	<font class="keyword">public </font><font class="keyword">void </font>surfaceDestroyed(SurfaceHolder holder) {</p><p>	}</p><p>}</p><p></pre></p><p>一、 MediaPlayer 播放音频的实现步骤：1. 调用MediaPlayer.create(context, R.raw.himi); 利用MediaPlayer类调用create方法并且传入通过id索引的资源音频文件，得到实例;</p><p>2. 得到的实例就可以调用 MediaPlayer.star();简单吧、其实MediaPlayer还有几个构造方法，大家有兴趣可以去尝试和实现，这里主要是简单的向大家介绍基本的，毕竟简单实用最好！ </p><p>二、 SoundPlayer 播放音频的实现步骤：</p><p>1.   new出一个实例 ;   new SoundPool(4, AudioManager.STREAM_MUSIC, 100);第一个参数是允许有多少个声音流同时播放,第2个参数是声音类型,第三个参数是声音的品质;</p><p>2.loadId = soundPool.load(context, R.raw.himi_ogg, 1);</p><p>3. 使用实例调用play方法传入对应的音频文件id即可！ 下面讲下两个播放形式的利弊：    </p><p>使用MediaPlayer来播放音频文件存在一些不足:例如：资源占用量较高、延迟时间较长、不支持多个音频同时播放等。这些缺点决定了MediaPlayer在某些场合的使用情况不会很理想，例如在对时间精准度要求相对较高的游戏开发中。最开始我使用的也是普通的MediaPlayer的方式,但这个方法不适合用于游戏开发,因为游戏里面同时播放多个音效是常有的事,用过MediaPlayer的朋友都该知道,它是不支持实时播放多个声音的,会出现或多或少的延迟,而且这个延迟是无法让人忍受的,尤其是在快速连续播放声音(比如连续猛点按钮)时,会非常明显,长的时候会出现3~5秒的延迟，【使用MediaPlayer.seekTo() 这个方法来解决此问题】;    </p><p>相对于使用SoundPool存在的一些问题:</p><p>1.SoundPool最大只能申请1M的内存空间，这就意味着我们只能使用一些很短的声音片段，而不是用它来播放歌曲或者游戏背景音乐（背景音乐可以考虑使用JetPlayer来播放）。 </p><p>2.SoundPool提供了pause和stop方法，但这些方法建议最好不要轻易使用，因为有些时候它们可能会使你的程序莫名其妙的终止。还有些朋友反映它们不会立即中止播放声音，而是把缓冲区里的数据播放完才会停下来，也许会多播放一秒钟。 </p><p>3.音频格式建议使用OGG格式。使用WAV格式的音频文件存放游戏音效，经过反复测试，在音效播放间隔较短的情况下会出现异常关闭的情况（有说法是SoundPool目前只对16bit的WAV文件有较好的支持）。后来将文件转成OGG格式，问题得到了解决。</p><p>4.在使用SoundPool播放音频的时候，如果在初始化中就调用播放函数进行播放音乐那么根本没有声音，不是因为没有执行，而是SoundPool需要一准备时间！囧。当然这个准备时间也很短，不会影响使用，只是程序一运行就播放会没有声音罢了，所以我把SoundPool播放写在了按键中处理了、备注4的地方大概看完了利弊解释，那么来看我的代码备注的地方：</p><p>备注1：这里我定义了一个HashMap,这个是哈希表，如果大家不是很了解这个类，那建议百度，google学习下，它与Hashtable很常用的,它俩的主要区别是：HashMap不同步、空键值、效率高;Hashtable同步、非空键值、效率略低;而在J2ME中不支持HashMap，因为me中不支持空键值,所以在me中只能使用hashtable、咳咳、言归正传，我这里使用hashmap主要是为了存入多个音频的ID,播放的时候可以同时播放多个音频。</p><p>上面也介绍了，SoundPool可以支持多个音频同时播放，而且SoundPool在播放的时候调用的这个方法(备注3)soundPool.play(loadId,currentVol,currentVol,1,0,1f);第一个参数指的就是之前的loadId！是通过soundPool.load(context,R.raw.himi_ogg,1);方法取出来的，那么除此之外还要注意一点的就是定义hashmap的时候一定要定义成这种形式HashMap&lt;Integer, Integer&gt; hm = new Hash&lt;Integer,Integer&gt;,声明此哈希表就是一个key和volue值都是Integer的哈希表！ </p><p>为什么要这么做，因为如果你只是简单的定义成 HashMap hm = newHashMap()，那么当你在播放的时候,也就是备注4方法这里的第一个id参数使用Hashmap.get()这个方法的时候总会出现错误的提示！</p><p>《SoundPool最大只能申请1M的内存空间，这就意味着我们只能使用一些很短的声音片段》为什么只能使用一些很短的声音呢？</p><p>大家还是看备注4方法的第一个参数，这里要求传入的Id类型是个int值，那么这个int其实对应的是通过load()方法返回的音频id，而且这个id会因音频文件的大小而变大变小，那么一旦我们的音频文件超过int最大值，那么就会报内存错误的异常。所以为什么用SoundPool只能播放一些简短的音频这就是其原因了。当然os 里为什么这么定义 我也无从查证和说明。</p><p>备注4 ：此方法中参数的解释</p><p>第一个参数是我通过SoundPool.load()方法返回的音频对应id，第二个第三个参数表示左右声道大小，第四个参数是优先级，第五个参数是循环次数，最后一个是播放速率（1.0 =正常播放，范围是0.5至2.0）</p><p>备注2: </p><p>这里是通过媒体服务得到一个音频管理器，从而来对音量大小进行调整。这里要强调一下，调整音频是用这个音频管理器调用setStreamVolume()的方式去调整，而不是MediaPlayer.setVolue(int LeftVolume,int RightVolume);这个方法的两个参数也是调正左右声道而不是调节声音大小。  </p><p>好了，对此我们对游戏开发中到底需要用什么来做进行了分析，总结就是SoundPool适合做特效声，其实播放背景音乐我感觉还是用MediaPlayer比较好，当然啦，用什么都看大家喜好和选择啦！下面附上项目下载地址：(项目10+MB因为含有res音频文件)</p><p>有人问怎么才知道一首歌曲播放完了，那么这里给说下：</p><p>PlaybackCompleted状态：文件正常播放完毕，而又没有设置循环播放的话就进入该状态，并会触发OnCompletionListener的onCompletion()方法。此时可以调用start()方法重新从头播放文件，也可以stop()停止MediaPlayer，或者也可以seekTo()来重新定位播放位置。</p><p></p></div>

</DIV></DIV>

<DIV id=footer style="display:none">
<P align="center">  
 
 
 
    </P>
</DIV></BODY></HTML>

