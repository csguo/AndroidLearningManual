
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML xmlns="http://www.w3.org/1999/xhtml">
<HEAD>
<TITLE>Android中播放GIF图片动画_Android学习手册</TITLE>
<META content="text/html; charset=gb2312" http-equiv=Content-Type><LINK  rel=stylesheet type=text/css href="../css/c5.css">
<META name=GENERATOR content="MSHTML 8.00.6001.18702">
<meta name="Description" content=Android基础 Android组件 Android用户界面 Android设备功能 Android数据存储 Android网络应用 Android游戏开发 Android多媒体 Android源码开发 Android高级进阶 Android面试题/>
<meta name="Keywords" content="android 学习手册">

</HEAD>
<BODY id=homesecond class=serverscripting>
<DIV id=wrapper>
<DIV id=header><h1><a href="../index.html">Android学习手册</a></h1> 
</DIV>

<DIV id=navfirst>
<div id="indexGuide"><UL><li ><A href="../basic/index.html">Android基础</A> </li><li ><A href="../component/index.html">Android组件</A> </li><li ><A href="../userinterface/index.html">用户界面</A> </li><li ><A href="../device/index.html">设备功能</A> </li><li ><A href="../datastorage/index.html">数据存储</A> </li><li ><A href="../network/index.html">网络应用</A> </li><li ><A href="../game/index.html">游戏开发</A> </li><li class="navcurrentLink"><A href="index.html">多媒体</A> </li><li ><A href="../source/index.html">源码开发</A> </li><li ><A href="../advance/index.html">高级进阶</A> </li><li ><A href="../interview/index.html">Android面试题</A> </li></UL></div>
</DIV>
<DIV id=navsecond>
<DIV id=course>
<div id="kcTitle">课 程 表</div>


  <h2><A title="Android多媒体功能" href="index_196.html">Android多媒体功能</A></h2>

  <h2><A title="Android多媒体之2D" href="index_197.html">Android多媒体之2D</A></h2>

  <h2><A title="Android多媒体之3D" href="index_198.html">Android多媒体之3D</A></h2>

  <h2><A title="Android多媒体之Bitmap" href="index_199.html">Android多媒体之Bitmap</A></h2>

  <h2><A title="Android多媒体之Canvas" href="index_200.html">Android多媒体之Canvas</A></h2>

  <h2><A title="Android多媒体之Drawable" href="index_201.html">Android多媒体之Drawable</A></h2>

  <h2><A title="Android多媒体之gif" href="index_202.html">Android多媒体之gif</A></h2>
<UL><li class="currentLink"><A title=Android中播放GIF图片动画 href="show_601_202.html">Android中播放GIF图片动画</A> </li><li ><A title=Android播放Gif动画 href="show_602_202.html">Android播放Gif动画</A> </li><li ><A title=Gif 图片动态加载 href="show_603_202.html">Gif 图片动态加载</A> </li></UL>
  <h2><A title="Android多媒体之MediaStore" href="index_203.html">Android多媒体之MediaStore</A></h2>

  <h2><A title="Android多媒体之动画" href="index_204.html">Android多媒体之动画</A></h2>

  <h2><A title="Android多媒体之分辨率" href="index_205.html">Android多媒体之分辨率</A></h2>

  <h2><A title="Android多媒体之分屏幕" href="index_206.html">Android多媒体之分屏幕</A></h2>

</DIV></DIV>
<DIV id=maincontent>
<DIV id=w3school>
<H1></H1>
<P><STRONG></STRONG></P></DIV>

<DIV>
<H2>Android中播放GIF图片动画</H2>
<div style="line-height:20px; font-size:14px;"><p>1. 引言</p><p>大家都应该知道在Android中，默认情况下是不允许播放GIF图片动画的，这时需要自己实现来播放GIF动画，在网上找了找能用的实例，又动手做了一下，最后给大家贴出来与大家共享。</p><p>2. 功能实现</p><p>(1) 主Activity实现：</p><p><pre><font class="keyword">import </font>android.app.Activity;</p><p><font class="keyword">import </font>android.os.Bundle;</p><p><font class="keyword">public </font><font class="keyword">class </font>GIFPlayerActivity </font><font class="keyword">extends </font>Activity {</p><p>	@Override</p><p>	<font class="keyword">public </font><font class="keyword">void </font>onCreate(Bundle savedInstanceState) {</p><p>		<font class="keyword">super</font>.onCreate(savedInstanceState);</p><p>		</font>GameView gameView = <font class="keyword">new </font>GameView(</font><font class="keyword">this</font>);</p><p>		setContentView(gameView);</p><p>	}</p><p>}</p><p></pre></p><p>(2) GIF图片动画View：</p><p><pre><font class="keyword">import </font>java.io.ByteArrayOutputStream;</p><p><font class="keyword">import </font>java.io.IOException;</p><p><font class="keyword">import </font>java.io.InputStream;</p><p><font class="keyword">import </font>android.content.Context;</p><p><font class="keyword">import </font>android.graphics.Bitmap;</p><p><font class="keyword">import </font>android.graphics.Canvas;</p><p><font class="keyword">import </font>android.graphics.Paint;</p><p><font class="keyword">import </font>android.view.View;</p><p><font class="keyword">public </font><font class="keyword">class </font>GameView </font><font class="keyword">extends </font>View </font><font class="keyword">implements </font>Runnable {</p><p>	<font class="keyword">private </font>GIFFrameManager mGIFFrameManager = </font><font class="keyword">null</font>;</p><p>	<font class="keyword">private </font>Pa</font><font class="keyword">int </font>mPa</font><font class="keyword">int </font>= </font><font class="keyword">null</font>;</p><p>	<font class="keyword">public </font>GameView(Context context) {</p><p>		<font class="keyword">super</font>(context);</p><p>		</font>mGIFFrameManager = GIFFrameManager.CreateGifImage(<font class="keyword">this</font>.fileConnect(</font><font class="keyword">this</font></p><p>				.getResources().openRawResource(R.drawable.cat)));</p><p>		<font class="keyword">new </font>Thread(</font><font class="keyword">this</font>).start();</p><p>	}</p><p>	<font class="keyword">protected </font><font class="keyword">void </font>onDraw(Canvas canvas) {</p><p>		<font class="keyword">super</font>.onDraw(canvas);</p><p>		</font>mPa<font class="keyword">int </font>= </font><font class="keyword">new </font>Paint();</p><p>		mGIFFrameManager.nextFrame();</p><p>		Bitmap bitmap = mGIFFrameManager.getImage();</p><p>		<font class="keyword">if </font>(bitmap != </font><font class="keyword">null</font>) {</p><p>			</font>canvas.drawBitmap(bitmap, 0, 0, mPa<font class="keyword">int</font>);</p><p>		}</p><p>	}</p><p>	<font class="keyword">public </font>byte[] fileConnect(InputStream in) {</p><p>		</font>ByteArrayOutputStream out = <font class="keyword">new </font>ByteArrayOutputStream();</p><p>		<font class="keyword">int </font>ch = 0;</p><p>		<font class="keyword">try </font>{</p><p>			<font class="keyword">while </font>((ch = in.read()) != -1) {</p><p>				out.write(ch);</p><p>			}</p><p>			byte[] b = out.toByteArray();</p><p>			out.close();</p><p>			</font>out = <font class="keyword">null</font>;</p><p>			in.close();</p><p>			</font>in = <font class="keyword">null</font>;</p><p>			<font class="keyword">return </font>b;</p><p>		</font>} <font class="keyword">catch </font>(IOException e) {</p><p>			e.printStackTrace();</p><p>			<font class="keyword">return </font><font class="keyword">null</font>;</p><p>		}</p><p>	}</p><p>	<font class="keyword">public </font><font class="keyword">void </font>run() {</p><p>		<font class="keyword">while </font>(!Thread.interrupted()) {</p><p>			<font class="keyword">try </font>{</p><p>				Thread.sleep(100);</p><p>				<font class="keyword">this</font>.postInvalidate();</p><p>			</font>} <font class="keyword">catch </font>(Exception ex) {</p><p>				ex.printStackTrace();</p><p>				Thread.currentThread().interrupt();</p><p>			}</p><p>		}</p><p>	}</p><p>}</p><p></pre></p><p>(3) GIF图片动画播放管理器：</p><p><pre><font class="keyword">import </font>java.util.Vector;</p><p><font class="keyword">import </font>android.graphics.Bitmap;</p><p><font class="keyword">public </font><font class="keyword">class </font>GIFFrameManager {</p><p>	<font class="keyword">private </font>Vector&lt;Bitmap&gt; frames;</p><p>	<font class="keyword">private </font><font class="keyword">int </font>index;</p><p>	<font class="keyword">public </font>GIFFrameManager() {</p><p>		</font>frames = <font class="keyword">new </font>Vector&lt;Bitmap&gt;(1);</p><p>		index = 0;</p><p>	}</p><p>	<font class="keyword">public </font><font class="keyword">void </font>addImage(Bitmap image) {</p><p>		frames.addElement(image);</p><p>	}</p><p>	<font class="keyword">public </font><font class="keyword">int </font>size() {</p><p>		<font class="keyword">return </font>frames.size();</p><p>	}</p><p>	<font class="keyword">public </font>Bitmap getImage() {</p><p>		<font class="keyword">if </font>(size() == 0) {</p><p>			<font class="keyword">return </font><font class="keyword">null</font>;</p><p>		</font>} <font class="keyword">else </font>{</p><p>			<font class="keyword">return </font>(Bitmap) frames.elementAt(index);</p><p>		}</p><p>	}</p><p>	<font class="keyword">public </font><font class="keyword">void </font>nextFrame() {</p><p>		<font class="keyword">if </font>(index + 1 &lt; size()) {</p><p>			index++;</p><p>		</font>} <font class="keyword">else </font>{</p><p>			index = 0;</p><p>		}</p><p>	}</p><p>	<font class="keyword">public </font><font class="keyword">static </font>GIFFrameManager CreateGifImage(byte bytes[]) {</p><p>		<font class="keyword">try </font>{</p><p>			</font>GIFFrameManager GF = <font class="keyword">new </font>GIFFrameManager();</p><p>			</font>Bitmap image = <font class="keyword">null</font>;</p><p>			</font>GIFEncoder gifdecoder = <font class="keyword">new </font>GIFEncoder(bytes);</p><p>			<font class="keyword">for </font>(; gifdecoder.moreFrames(); gifdecoder.nextFrame()) {</p><p>				<font class="keyword">try </font>{</p><p>					image = gifdecoder.decodeImage();</p><p>					<font class="keyword">if </font>(GF != </font><font class="keyword">null</font> && image != </font><font class="keyword">null</font>) {</p><p>						GF.addImage(image);</p><p>					}</p><p>					<font class="keyword">continue</font>;</p><p>				</font>} <font class="keyword">catch </font>(Exception e) {</p><p>					e.printStackTrace();</p><p>				}</p><p>				<font class="keyword">break</font>;</p><p>			}</p><p>			gifdecoder.clear();</p><p>			</font>gifdecoder = <font class="keyword">null</font>;</p><p>			<font class="keyword">return </font>GF;</p><p>		</font>} <font class="keyword">catch </font>(Exception e) {</p><p>			e.printStackTrace();</p><p>			<font class="keyword">return </font><font class="keyword">null</font>;</p><p>		}</p><p>	}</p><p>}</p><p></pre></p><p>(4) GIF图片动画编码：</p><p><pre><font class="keyword">import </font>android.graphics.Bitmap;</p><p><font class="keyword">import </font>android.graphics.Bitmap.Config;</p><p><font class="keyword">public </font><font class="keyword">class </font>GIFEncoder {</p><p>	<font class="keyword">private </font><font class="keyword">int </font>E0;</p><p>	<font class="keyword">private </font><font class="keyword">int </font>E1[];</p><p>	<font class="keyword">private </font><font class="keyword">int </font>E2;</p><p>	<font class="keyword">private </font><font class="keyword">int </font>E6;</p><p>	<font class="keyword">private </font><font class="keyword">boolean </font>E7;</p><p>	<font class="keyword">private </font><font class="keyword">int </font>E8[];</p><p>	<font class="keyword">private </font><font class="keyword">int </font>width;</p><p>	<font class="keyword">private </font><font class="keyword">int </font>height;</p><p>	<font class="keyword">private </font><font class="keyword">int </font>ED;</p><p>	<font class="keyword">private </font><font class="keyword">boolean </font>EE;</p><p>	<font class="keyword">private </font><font class="keyword">boolean </font>EF;</p><p>	<font class="keyword">private </font><font class="keyword">int </font>F0[];</p><p>	<font class="keyword">private </font><font class="keyword">int </font>F1;</p><p>	<font class="keyword">private </font><font class="keyword">boolean </font>F2;</p><p>	<font class="keyword">private </font><font class="keyword">int </font>F3;</p><p>	<font class="keyword">private </font><font class="keyword">long </font>F4;</p><p>	<font class="keyword">private </font><font class="keyword">int </font>F5;</p><p>	<font class="keyword">private </font><font class="keyword">static </font><font class="keyword">final </font><font class="keyword">int </font>F6[] = { 8, 8, 4, 2 </font>};</p><p>	<font class="keyword">private </font><font class="keyword">static </font><font class="keyword">final </font><font class="keyword">int </font>F8[] = { 0, 4, 2, 1 </font>};</p><p>	<font class="keyword">int </font>curFrame;</p><p>	<font class="keyword">int </font>poolsize;</p><p>	<font class="keyword">int </font>FA;</p><p>	byte C2[];</p><p>	<font class="keyword">int </font>FB;</p><p>	<font class="keyword">int </font>FC;</p><p>	<font class="keyword">int </font>FD;</p><p>	<font class="keyword">public </font>GIFEncoder(byte abyte0[]) {</p><p>		E0 = -1;</p><p>		</font>E1 = <font class="keyword">new </font><font class="keyword">int</font>[280];</p><p>		E2 = -1;</p><p>		E6 = 0;</p><p>		</font>E7 = <font class="keyword">false</font>;</p><p>		</font>E8 = <font class="keyword">null</font>;</p><p>		width = 0;</p><p>		height = 0;</p><p>		ED = 0;</p><p>		</font>EE = <font class="keyword">false</font>;</p><p>		</font>EF = <font class="keyword">false</font>;</p><p>		</font>F0 = <font class="keyword">null</font>;</p><p>		F1 = 0;</p><p>		F5 = 0;</p><p>		curFrame = 0;</p><p>		C2 = abyte0;</p><p>		poolsize = C2.length;</p><p>		FA = 0;</p><p>	}</p><p>	<font class="keyword">public </font><font class="keyword">boolean </font>moreFrames() {</p><p>		<font class="keyword">return </font>poolsize - FA &gt;= 16;</p><p>	}</p><p>	<font class="keyword">public </font><font class="keyword">void </font>nextFrame() {</p><p>		curFrame++;</p><p>	}</p><p>	<font class="keyword">public </font>Bitmap decodeImage() {</p><p>		<font class="keyword">return </font>decodeImage(curFrame);</p><p>	}</p><p>	<font class="keyword">public </font>Bitmap decodeImage(</font><font class="keyword">int </font>i) {</p><p>		<font class="keyword">if </font>(i &lt;= E0) {</p><p>			<font class="keyword">return </font><font class="keyword">null</font>;</p><p>		}</p><p>		<font class="keyword">if </font>(E0 &lt; 0) {</p><p>			<font class="keyword">if </font>(!E3()) {</p><p>				<font class="keyword">return </font><font class="keyword">null</font>;</p><p>			}</p><p>			<font class="keyword">if </font>(!E4()) {</p><p>				<font class="keyword">return </font><font class="keyword">null</font>;</p><p>			}</p><p>		}</p><p>		do {</p><p>			<font class="keyword">if </font>(!E9(1)) {</p><p>				<font class="keyword">return </font><font class="keyword">null</font>;</p><p>			}</p><p>			<font class="keyword">int </font>j = E1[0];</p><p>			<font class="keyword">if </font>(j == 59) {</p><p>				<font class="keyword">return </font><font class="keyword">null</font>;</p><p>			}</p><p>			<font class="keyword">if </font>(j == 33) {</p><p>				<font class="keyword">if </font>(!E7()) {</p><p>					<font class="keyword">return </font><font class="keyword">null</font>;</p><p>				}</p><p>			</font>} <font class="keyword">else </font><font class="keyword">if </font>(j == 44) {</p><p>				<font class="keyword">if </font>(!E5()) {</p><p>					<font class="keyword">return </font><font class="keyword">null</font>;</p><p>				}</p><p>				Bitmap image = createImage();</p><p>				E0++;</p><p>				<font class="keyword">if </font>(E0 &lt; i) {</p><p>					</font>image = <font class="keyword">null</font>;</p><p>				</font>} <font class="keyword">else </font>{</p><p>					<font class="keyword">return </font>image;</p><p>				}</p><p>			}</p><p>		</font>} <font class="keyword">while </font>(</font><font class="keyword">true</font>);</p><p>	}</p><p>	<font class="keyword">public </font><font class="keyword">void </font>clear() {</p><p>		</font>C2 = <font class="keyword">null</font>;</p><p>		</font>E1 = <font class="keyword">null</font>;</p><p>		</font>E8 = <font class="keyword">null</font>;</p><p>		</font>F0 = <font class="keyword">null</font>;</p><p>	}</p><p>	<font class="keyword">private </font>Bitmap createImage() {</p><p>		<font class="keyword">int </font>i = width;</p><p>		<font class="keyword">int </font>j = height;</p><p>		<font class="keyword">int </font>j1 = 0;</p><p>		<font class="keyword">int </font>k1 = 0;</p><p>		<font class="keyword">int </font>ai[] = </font><font class="keyword">new </font><font class="keyword">int</font>[4096];</p><p>		<font class="keyword">int </font>ai1[] = </font><font class="keyword">new </font><font class="keyword">int</font>[4096];</p><p>		<font class="keyword">int </font>ai2[] = </font><font class="keyword">new </font><font class="keyword">int</font>[8192];</p><p>		<font class="keyword">if </font>(!E9(1)) {</p><p>			<font class="keyword">return </font><font class="keyword">null</font>;</p><p>		}</p><p>		<font class="keyword">int </font>k = E1[0];</p><p>		<font class="keyword">int</font>[] image = </font><font class="keyword">new </font><font class="keyword">int</font>[width * height];</p><p>		<font class="keyword">int </font>ai3[] = E8;</p><p>		<font class="keyword">if </font>(EE) {</p><p>			ai3 = F0;</p><p>		}</p><p>		<font class="keyword">if </font>(E2 &gt;= 0) {</p><p>			ai3[E2] = 0xffffff;</p><p>		}</p><p>		<font class="keyword">int </font>l2 = 1 &lt;&lt; k;</p><p>		<font class="keyword">int </font>j3 = l2 + 1;</p><p>		<font class="keyword">int </font>k2 = k + 1;</p><p>		<font class="keyword">int </font>l3 = l2 + 2;</p><p>		<font class="keyword">int </font>k3 = -1;</p><p>		<font class="keyword">int </font>j4 = -1;</p><p>		<font class="keyword">for </font>(</font><font class="keyword">int </font>l1 = 0; l1 &lt; l2; l1++) {</p><p>			ai1[l1] = l1;</p><p>		}</p><p>		<font class="keyword">int </font>j2 = 0;</p><p>		E2();</p><p>		j1 = 0;</p><p>		</font>label0: <font class="keyword">for </font>(</font><font class="keyword">int </font>i2 = 0; i2 &lt; j; i2++) {</p><p>			<font class="keyword">int </font>i1 = 0;</p><p>			do {</p><p>				<font class="keyword">if </font>(i1 &gt;= i) {</p><p>					<font class="keyword">break</font>;</p><p>				}</p><p>				<font class="keyword">if </font>(j2 == 0) {</p><p>					<font class="keyword">int </font>i4 = E1(k2);</p><p>					<font class="keyword">if </font>(i4 &lt; 0) {</p><p>						<font class="keyword">return </font>Bitmap.createBitmap(image, width, height,</p><p>								Config.RGB_565);</p><p>					}</p><p>					<font class="keyword">if </font>(i4 &gt; l3 || i4 == j3) {</p><p>						<font class="keyword">return </font>Bitmap.createBitmap(image, width, height,</p><p>								Config.RGB_565);</p><p>					}</p><p>					<font class="keyword">if </font>(i4 == l2) {</p><p>						k2 = k + 1;</p><p>						l3 = l2 + 2;</p><p>						k3 = -1;</p><p>						<font class="keyword">continue</font>;</p><p>					}</p><p>					<font class="keyword">if </font>(k3 == -1) {</p><p>						ai2[j2++] = ai1[i4];</p><p>						k3 = i4;</p><p>						j4 = i4;</p><p>						<font class="keyword">continue</font>;</p><p>					}</p><p>					<font class="keyword">int </font>i3 = i4;</p><p>					<font class="keyword">if </font>(i4 == l3) {</p><p>						ai2[j2++] = j4;</p><p>						i4 = k3;</p><p>					}</p><p>					<font class="keyword">for </font>(; i4 &gt; l2; i4 = ai[i4]) {</p><p>						ai2[j2++] = ai1[i4];</p><p>					}</p><p>					j4 = ai1[i4];</p><p>					<font class="keyword">if </font>(l3 &gt;= 4096) {</p><p>						<font class="keyword">return </font>Bitmap.createBitmap(image, width, height,</p><p>								Config.RGB_565);</p><p>					}</p><p>					ai2[j2++] = j4;</p><p>					ai[l3] = k3;</p><p>					ai1[l3] = j4;</p><p>					<font class="keyword">if </font>(++l3 &gt;= 1 &lt;&lt; k2 && l3 &lt; 4096) {</p><p>						k2++;</p><p>					}</p><p>					k3 = i3;</p><p>				}</p><p>				<font class="keyword">int </font>l = ai2[--j2];</p><p>				<font class="keyword">if </font>(l &lt; 0) {</p><p>					<font class="keyword">return </font>Bitmap.createBitmap(image, width, height,</p><p>							Config.RGB_565);</p><p>				}</p><p>				<font class="keyword">if </font>(i1 == 0) {</p><p>					FC = 0;</p><p>					FB = ai3[l];</p><p>					FD = 0;</p><p>				</font>} <font class="keyword">else </font><font class="keyword">if </font>(FB != ai3[l]) {</p><p>					<font class="keyword">for </font>(</font><font class="keyword">int </font>mm = FD; mm &lt;= FD + FC; mm++) {</p><p>						image[j1 * width + mm] = FB;</p><p>					}</p><p>					FC = 0;</p><p>					FB = ai3[l];</p><p>					FD = i1;</p><p>					<font class="keyword">if </font>(i1 == i - 1) {</p><p>						image[j1 * width + i1] = ai3[l];</p><p>					}</p><p>				</font>} <font class="keyword">else </font>{</p><p>					FC++;</p><p>					<font class="keyword">if </font>(i1 == i - 1) {</p><p>						<font class="keyword">for </font>(</font><font class="keyword">int </font>mm = FD; mm &lt;= FD + FC; mm++) {</p><p>							image[j1 * width + mm] = FB;</p><p>						}</p><p>					}</p><p>				}</p><p>				i1++;</p><p>			</font>} <font class="keyword">while </font>(</font><font class="keyword">true</font>);</p><p>			<font class="keyword">if </font>(EF) {</p><p>				j1 += F6[k1];</p><p>				do {</p><p>					<font class="keyword">if </font>(j1 &lt; j) {</p><p>						<font class="keyword">continue</font> label0;</p><p>					}</p><p>					<font class="keyword">if </font>(++k1 &gt; 3) {</p><p>						<font class="keyword">return </font>Bitmap.createBitmap(image, width, height,</p><p>								Config.RGB_565);</p><p>					}</p><p>					j1 = F8[k1];</p><p>				</font>} <font class="keyword">while </font>(</font><font class="keyword">true</font>);</p><p>			}</p><p>			j1++;</p><p>		}</p><p>		<font class="keyword">return </font>Bitmap.createBitmap(image, width, height, Config.RGB_565);</p><p>	}</p><p>	<font class="keyword">private </font><font class="keyword">int </font>E1(</font><font class="keyword">int </font>i) {</p><p>		<font class="keyword">while </font>(F5 &lt; i) {</p><p>			<font class="keyword">if </font>(F2) {</p><p>				<font class="keyword">return </font>-1;</p><p>			}</p><p>			<font class="keyword">if </font>(F1 == 0) {</p><p>				F1 = E8();</p><p>				F3 = 0;</p><p>				<font class="keyword">if </font>(F1 &lt;= 0) {</p><p>					</font>F2 = <font class="keyword">true</font>;</p><p>					<font class="keyword">break</font>;</p><p>				}</p><p>			}</p><p>			F4 += E1[F3] &lt;&lt; F5;</p><p>			F3++;</p><p>			F5 += 8;</p><p>			F1--;</p><p>		}</p><p>		<font class="keyword">int </font>j = (</font><font class="keyword">int</font>) F4 & (1 &lt;&lt; i) - 1;</p><p>		F4 &gt;&gt;= i;</p><p>		F5 -= i;</p><p>		<font class="keyword">return </font>j;</p><p>	}</p><p>	<font class="keyword">private </font><font class="keyword">void </font>E2() {</p><p>		F5 = 0;</p><p>		F1 = 0;</p><p>		F4 = 0L;</p><p>		</font>F2 = <font class="keyword">false</font>;</p><p>		F3 = -1;</p><p>	}</p><p>	<font class="keyword">private </font><font class="keyword">boolean </font>E3() {</p><p>		<font class="keyword">if </font>(!E9(6)) {</p><p>			<font class="keyword">return </font><font class="keyword">false</font>;</p><p>		}</p><p>		<font class="keyword">return </font>E1[0] == 71 && E1[1] == 73 && E1[2] == 70 && E1[3] == 56</p><p>				&& (E1[4] == 55 || E1[4] == 57) && E1[5] == 97;</p><p>	}</p><p>	<font class="keyword">private </font><font class="keyword">boolean </font>E4() {</p><p>		<font class="keyword">if </font>(!E9(7)) {</p><p>			<font class="keyword">return </font><font class="keyword">false</font>;</p><p>		}</p><p>		<font class="keyword">int </font>i = E1[4];</p><p>		E6 = 2 &lt;&lt; (i & 7);</p><p>		E7 = EB(i, 128);</p><p>		</font>E8 = <font class="keyword">null</font>;</p><p>		<font class="keyword">return </font>!E7 || E6(E6, </font><font class="keyword">true</font>);</p><p>	}</p><p>	<font class="keyword">private </font><font class="keyword">boolean </font>E5() {</p><p>		<font class="keyword">if </font>(!E9(9)) {</p><p>			<font class="keyword">return </font><font class="keyword">false</font>;</p><p>		}</p><p>		width = EA(E1[4], E1[5]);</p><p>		height = EA(E1[6], E1[7]);</p><p>		<font class="keyword">int </font>i = E1[8];</p><p>		EE = EB(i, 128);</p><p>		ED = 2 &lt;&lt; (i & 7);</p><p>		EF = EB(i, 64);</p><p>		</font>F0 = <font class="keyword">null</font>;</p><p>		<font class="keyword">return </font>!EE || E6(ED, </font><font class="keyword">false</font>);</p><p>	}</p><p>	<font class="keyword">private </font><font class="keyword">boolean </font>E6(</font><font class="keyword">int </font>i, </font><font class="keyword">boolean </font>flag) {</p><p>		<font class="keyword">int </font>ai[] = </font><font class="keyword">new </font><font class="keyword">int</font>[i];</p><p>		<font class="keyword">for </font>(</font><font class="keyword">int </font>j = 0; j &lt; i; j++) {</p><p>			<font class="keyword">if </font>(!E9(3)) {</p><p>				<font class="keyword">return </font><font class="keyword">false</font>;</p><p>			}</p><p>			ai[j] = E1[0] &lt;&lt; 16 | E1[1] &lt;&lt; 8 | E1[2] | 0xff000000;</p><p>		}</p><p>		<font class="keyword">if </font>(flag) {</p><p>			E8 = ai;</p><p>		</font>} <font class="keyword">else </font>{</p><p>			F0 = ai;</p><p>		}</p><p>		<font class="keyword">return </font><font class="keyword">true</font>;</p><p>	}</p><p>	<font class="keyword">private </font><font class="keyword">boolean </font>E7() {</p><p>		<font class="keyword">if </font>(!E9(1)) {</p><p>			<font class="keyword">return </font><font class="keyword">false</font>;</p><p>		}</p><p>		<font class="keyword">int </font>i = E1[0];</p><p>		<font class="keyword">int </font>j = -1;</p><p>		<font class="keyword">switch </font>(i) {</p><p>		<font class="keyword">case </font>249:</p><p>			j = E8();</p><p>			<font class="keyword">if </font>(j &lt; 0) {</p><p>				<font class="keyword">return </font><font class="keyword">true</font>;</p><p>			}</p><p>			<font class="keyword">if </font>((E1[0] & 1) != 0) {</p><p>				E2 = E1[3];</p><p>			</font>} <font class="keyword">else </font>{</p><p>				E2 = -1;</p><p>			}</p><p>			<font class="keyword">break</font>;</p><p>		}</p><p></p><p>		do {</p><p>			j = E8();</p><p>		</font>} <font class="keyword">while </font>(j &gt; 0);</p><p>		<font class="keyword">return </font><font class="keyword">true</font>;</p><p>	}</p><p>	<font class="keyword">private </font><font class="keyword">int </font>E8() {</p><p>		<font class="keyword">if </font>(!E9(1)) {</p><p>			<font class="keyword">return </font>-1;</p><p>		}</p><p>		<font class="keyword">int </font>i = E1[0];</p><p>		<font class="keyword">if </font>(i != 0 && !E9(i)) {</p><p>			<font class="keyword">return </font>-1;</p><p>		</font>} <font class="keyword">else </font>{</p><p>			<font class="keyword">return </font>i;</p><p>		}</p><p>	}</p><p>	<font class="keyword">private </font><font class="keyword">boolean </font>E9(</font><font class="keyword">int </font>i) {</p><p>		<font class="keyword">if </font>(FA + i &gt;= poolsize) {</p><p>			<font class="keyword">return </font><font class="keyword">false</font>;</p><p>		}</p><p>		<font class="keyword">for </font>(</font><font class="keyword">int </font>j = 0; j &lt; i; j++) {</p><p>			<font class="keyword">int </font>k = C2[FA + j];</p><p>			<font class="keyword">if </font>(k &lt; 0) {</p><p>				k += 256;</p><p>			}</p><p>			E1[j] = k;</p><p>		}</p><p>		FA += i;</p><p>		<font class="keyword">return </font><font class="keyword">true</font>;</p><p>	}</p><p>	<font class="keyword">private </font><font class="keyword">static </font><font class="keyword">final </font><font class="keyword">int </font>EA(</font><font class="keyword">int </font>i, </font><font class="keyword">int </font>j) {</p><p>		<font class="keyword">return </font>j &lt;&lt; 8 | i;</p><p>	}</p><p>	<font class="keyword">private </font><font class="keyword">static </font><font class="keyword">final </font><font class="keyword">boolean </font>EB(</font><font class="keyword">int </font>i, </font><font class="keyword">int </font>j) {</p><p>		<font class="keyword">return </font>(i & j) == j;</p><p>	}</p><p>}</p><p></pre></p><p></p></div>

</DIV></DIV>

<DIV id=footer style="display:none">
<P align="center">  
 
 
 
    </P>
</DIV></BODY></HTML>

