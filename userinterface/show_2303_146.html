
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML xmlns="http://www.w3.org/1999/xhtml">
<HEAD>
<TITLE>ViewFlipper的使用_Android学习手册</TITLE>
<META content="text/html; charset=gb2312" http-equiv=Content-Type><LINK  rel=stylesheet type=text/css href="../css/c5.css">
<META name=GENERATOR content="MSHTML 8.00.6001.18702">
<meta name="Description" content=Android基础 Android组件 Android用户界面 Android设备功能 Android数据存储 Android网络应用 Android游戏开发 Android多媒体 Android源码开发 Android高级进阶 Android面试题/>
<meta name="Keywords" content="android 学习手册">

</HEAD>
<BODY id=homesecond class=serverscripting>
<DIV id=wrapper>
<DIV id=header><h1><a href="../index.html">Android学习手册</a></h1> 
</DIV>

<DIV id=navfirst>
<div id="indexGuide"><UL><li ><A href="../basic/index.html">Android基础</A> </li><li ><A href="../component/index.html">Android组件</A> </li><li class="navcurrentLink"><A href="index.html">用户界面</A> </li><li ><A href="../device/index.html">设备功能</A> </li><li ><A href="../datastorage/index.html">数据存储</A> </li><li ><A href="../network/index.html">网络应用</A> </li><li ><A href="../game/index.html">游戏开发</A> </li><li ><A href="../multimedia/index.html">多媒体</A> </li><li ><A href="../source/index.html">源码开发</A> </li><li ><A href="../advance/index.html">高级进阶</A> </li><li ><A href="../interview/index.html">Android面试题</A> </li></UL></div>
</DIV>
<DIV id=navsecond>
<DIV id=course>
<div id="kcTitle">课 程 表</div>


  <h2><A title="用户界面之view(视图)" href="index_123.html">用户界面之view(视图)</A></h2>

  <h2><A title="用户界面之Layout(布局)" href="index_124.html">用户界面之Layout(布局)</A></h2>

  <h2><A title="用户界面之TextView(文本视图)" href="index_125.html">用户界面之TextView(文本视图)</A></h2>

  <h2><A title="用户界面之EditText(编辑视图)" href="index_126.html">用户界面之EditText(编辑视图)</A></h2>

  <h2><A title="用户界面之Button(按钮)" href="index_127.html">用户界面之Button(按钮)</A></h2>

  <h2><A title="用户界面之Dialog(对话框)" href="index_128.html">用户界面之Dialog(对话框)</A></h2>

  <h2><A title="用户界面之ListView(列表视图)" href="index_129.html">用户界面之ListView(列表视图)</A></h2>

  <h2><A title="用户界面之Adapter(适配器)" href="index_130.html">用户界面之Adapter(适配器)</A></h2>

  <h2><A title="用户界面之Menu(菜单)" href="index_131.html">用户界面之Menu(菜单)</A></h2>

  <h2><A title="用户界面之Notification(通知栏)" href="index_132.html">用户界面之Notification(通知栏)</A></h2>

  <h2><A title="NotificationImageView(图像视图)" href="index_133.html">NotificationImageView(图像视图)</A></h2>

  <h2><A title="用户界面之GridView(格视图)" href="index_134.html">用户界面之GridView(格视图)</A></h2>

  <h2><A title="用户界面之ProgressBar(进度条)" href="index_135.html">用户界面之ProgressBar(进度条)</A></h2>

  <h2><A title="用户界面之Checkbox(复选框)" href="index_136.html">用户界面之Checkbox(复选框)</A></h2>

  <h2><A title="用户界面之ScrollView(滚动视图)" href="index_137.html">用户界面之ScrollView(滚动视图)</A></h2>

  <h2><A title="用户界面之Gallery(长廊视图)" href="index_138.html">用户界面之Gallery(长廊视图)</A></h2>

  <h2><A title="用户界面之ActionBar(导航栏)" href="index_139.html">用户界面之ActionBar(导航栏)</A></h2>

  <h2><A title="用户界面之PopupWindow(弹出窗口)" href="index_140.html">用户界面之PopupWindow(弹出窗口)</A></h2>

  <h2><A title="用户界面之RatingBar(评分栏)" href="index_141.html">用户界面之RatingBar(评分栏)</A></h2>

  <h2><A title="用户界面之Spinner" href="index_142.html">用户界面之Spinner</A></h2>

  <h2><A title="用户界面之SeekBar(搜索bar)" href="index_143.html">用户界面之SeekBar(搜索bar)</A></h2>

  <h2><A title="用户界面之TabHost(分割栏)" href="index_144.html">用户界面之TabHost(分割栏)</A></h2>

  <h2><A title="用户界面之SlidingDrawer(抽屉)" href="index_145.html">用户界面之SlidingDrawer(抽屉)</A></h2>

  <h2><A title="用户界面之ViewFlipper" href="index_146.html">用户界面之ViewFlipper</A></h2>
<UL><li ><A title=Android ViewFlipper（一） href="show_2301_146.html">Android ViewFlipper（一）</A> </li><li ><A title=Android ViewFlipper（二） href="show_2302_146.html">Android ViewFlipper（二）</A> </li><li class="currentLink"><A title=ViewFlipper的使用 href="show_2303_146.html">ViewFlipper的使用</A> </li><li ><A title=ViewFlipper Animation使用 href="show_2304_146.html">ViewFlipper Animation使用</A> </li><li ><A title=ViewFlipper详细使用 href="show_2305_146.html">ViewFlipper详细使用</A> </li><li ><A title=Android ViewFlipper触摸动画 href="show_2306_146.html">Android ViewFlipper触摸动画</A> </li><li ><A title=解决ViewFlipper与ScrollView滑动响应事件拦截的问题（一） href="show_2307_146.html">解决ViewFlipper与ScrollView滑动响应事件拦截的问题（一）</A> </li><li ><A title=解决ViewFlipper与ScrollView滑动响应事件拦截的问题（二） href="show_2308_146.html">解决ViewFlipper与ScrollView滑动响应事件拦截的问题（二）</A> </li><li ><A title=Android实现渐显按钮的左右滑动效果 href="show_2309_146.html">Android实现渐显按钮的左右滑动效果</A> </li><li ><A title=ViewFlipper实现各种切换动画 href="show_2310_146.html">ViewFlipper实现各种切换动画</A> </li></UL>
  <h2><A title="用户界面之SurfaceView" href="index_147.html">用户界面之SurfaceView</A></h2>

  <h2><A title="用户界面之Splash" href="index_148.html">用户界面之Splash</A></h2>

  <h2><A title="用户界面之Toast" href="index_149.html">用户界面之Toast</A></h2>

  <h2><A title="用户界面之AlarmManager" href="index_150.html">用户界面之AlarmManager</A></h2>

  <h2><A title="用户界面之Fragment" href="index_151.html">用户界面之Fragment</A></h2>

  <h2><A title="用户界面之WebView(网络视图)" href="index_152.html">用户界面之WebView(网络视图)</A></h2>

  <h2><A title="Android用户界面之Widget(小组件)" href="index_153.html">Android用户界面之Widget(小组件)</A></h2>

  <h2><A title="Android用户界面之theme和style" href="index_154.html">Android用户界面之theme和style</A></h2>

  <h2><A title="Android用户界面之多语言" href="index_155.html">Android用户界面之多语言</A></h2>

  <h2><A title="Android用户界面之界面特效" href="index_156.html">Android用户界面之界面特效</A></h2>

</DIV></DIV>
<DIV id=maincontent>
<DIV id=w3school>
<H1></H1>
<P><STRONG></STRONG></P></DIV>

<DIV>
<H2>ViewFlipper的使用</H2>
<div style="line-height:20px; font-size:14px;"><p>屏幕切换指的是在同一个Activity内屏幕见的切换，最长见的情况就是在一个FrameLayout内有多个页面，比如一个系统设置页面；一个个性化设置页面。</p><p>通过查看OPhoneAPI文档可以发现，有个android.widget.ViewAnimator类继承至FrameLayout，ViewAnimator类的作用是为FrameLayout里面的View切换提供动画效果。该类有如下几个和动画相关的函数： </p><p>setInAnimation：设置View进入屏幕时候使用的动画，该函数有两个版本，一个接受单个参数，类型为android.view.animation.Animation；一个接受两个参数，类型为Context和int，分别为Context对象和定义Animation的resourceID。 </p><p><pre>setOutAnimation: 设置View退出屏幕时候使用的动画，参数setInAnimation函数一样。 </p><p>showNext：调用该函数来显示FrameLayout里面的下一个View。 </p><p>showPrevious：调用该函数来显示FrameLayout里面的上一个View。 </p><p></pre></p><p>一般不直接使用ViewAnimator而是使用它的两个子类ViewFlipper和ViewSwitcher。ViewFlipper可以用来指定FrameLayout内多个View之间的切换效果，可以一次指定也可以每次切换的时候都指定单独的效果。该类额外提供了如下几个函数： </p><p><pre>isFlipping：用来判断View切换是否正在进行。</p><p>setFilpInterval：设置View之间切换的时间间隔。</p><p>startFlipping：使用上面设置的时间间隔来开始切换所有的View，切换会循环进行。</p><p>stopFlipping: 停止View切换。</p><p></pre></p><p>ViewSwitcher顾名思义Switcher特指在两个View之间切换。可以通过该类指定一个ViewSwitcher.ViewFactory工程类来创建这两个View。该类也具有两个子类ImageSwitcher、TextSwitcher分别用于图片和文本切换。</p><p style="color:#3333FF;">ViewFlipper示例</p><p>记住，ViewFlipper是继承至FrameLayout的，所以它是一个Layout里面可以放置多个View。在示例中定义一个ViewFlipper，里面包含三个ViewGroup作为示例的三个屏幕，每个ViewGroup中包含一个按钮和一张图片，点击按钮则显示下一个屏幕。代码如下（res\layout\main.xml）： </p><p><pre>&lt;?xml version=<font class="Fields">"1.0"</font> encoding=</font><font class="Fields">"utf-8"</font>?&gt;</p><p>&lt;LinearLayout xmlns:android=<font class="Fields">"http:<font class="Comments">//schemas.android.com/apk/res/android</font></p><p>    </font>android:layout_width=<font class="Fields">"fill_parent</p><p>    </font>android:layout_height=<font class="Fields">"fill_parent</p><p>    </font>android:orientation=<font class="Fields">"vertical"</font> &gt;</p><p>    &lt;ViewFlipper</p><p>        </font>android:id=<font class="Fields">"@+id/details</p><p>        </font>android:layout_width=<font class="Fields">"fill_parent</p><p>        </font>android:layout_height=<font class="Fields">"fill_parent</p><p>        </font>android:flipInterval=<font class="Fields">"1000</p><p>        </font>android:inAnimation=<font class="Fields">"@anim/push_left_in</p><p>        </font>android:outAnimation=<font class="Fields">"@anim/push_left_out</p><p>        </font>android:persistentDrawingCache=<font class="Fields">"animation"</font> &gt;</p><p>        &lt;LinearLayout</p><p>            </font>android:layout_width=<font class="Fields">"fill_parent</p><p>            </font>android:layout_height=<font class="Fields">"fill_parent</p><p>            </font>android:orientation=<font class="Fields">"vertical"</font> &gt;</p><p>            &lt;Button</p><p>                </font>android:id=<font class="Fields">"@+id/Button_next1</p><p>                </font>android:layout_width=<font class="Fields">"fill_parent</p><p>                </font>android:layout_height=<font class="Fields">"wrap_content</p><p>                </font>android:text=<font class="Fields">"Next"</font> &gt;</p><p>            &lt;/Button&gt;</p><p>            &lt;ImageView</p><p>                </font>android:id=<font class="Fields">"@+id/image1</p><p>                </font>android:layout_width=<font class="Fields">"fill_parent</p><p>                </font>android:layout_height=<font class="Fields">"wrap_content</p><p>                </font>android:src=<font class="Fields">"@drawable/dell1"</font> &gt;</p><p>            &lt;/ImageView&gt;</p><p>        &lt;/LinearLayout&gt;</p><p>        &lt;LinearLayout</p><p>            </font>android:layout_width=<font class="Fields">"fill_parent</p><p>            </font>android:layout_height=<font class="Fields">"fill_parent</p><p>            </font>android:orientation=<font class="Fields">"vertical"</font> &gt;</p><p>            &lt;Button</p><p>                </font>android:id=<font class="Fields">"@+id/Button_next2</p><p>                </font>android:layout_width=<font class="Fields">"fill_parent</p><p>                </font>android:layout_height=<font class="Fields">"wrap_content</p><p>                </font>android:text=<font class="Fields">"Next"</font> &gt;</p><p>            &lt;/Button&gt;</p><p>            &lt;ImageView</p><p>                </font>android:id=<font class="Fields">"@+id/image2</p><p>                </font>android:layout_width=<font class="Fields">"fill_parent</p><p>                </font>android:layout_height=<font class="Fields">"wrap_content</p><p>                </font>android:src=<font class="Fields">"@drawable/lg"</font> &gt;</p><p>            &lt;/ImageView&gt;</p><p>        &lt;/LinearLayout&gt;</p><p>        &lt;LinearLayout</p><p>            </font>android:layout_width=<font class="Fields">"fill_parent</p><p>            </font>android:layout_height=<font class="Fields">"fill_parent</p><p>            </font>android:orientation=<font class="Fields">"vertical"</font> &gt;</p><p>            &lt;Button</p><p>                </font>android:id=<font class="Fields">"@+id/Button_next3</p><p>                </font>android:layout_width=<font class="Fields">"fill_parent</p><p>                </font>android:layout_height=<font class="Fields">"wrap_content</p><p>                </font>android:text=<font class="Fields">"Next"</font> &gt;</p><p>            &lt;/Button&gt;</p><p>            &lt;ImageView</p><p>                </font>android:id=<font class="Fields">"@+id/image3</p><p>                </font>android:layout_width=<font class="Fields">"fill_parent</p><p>                </font>android:layout_height=<font class="Fields">"wrap_content</p><p>                </font>android:src=<font class="Fields">"@drawable/lenovo"</font> &gt;</p><p>            &lt;/ImageView&gt;</p><p>        &lt;/LinearLayout&gt;</p><p>    &lt;/ViewFlipper&gt;</p><p>&lt;/LinearLayout&gt; </p><p></pre></p><p>很简单，在Layout定义中指定动画的相关属性就可以了，通过persistentDrawingCache指定缓存策略；flipInterval指定每个View动画之间的时间间隔；inAnimation和outAnimation分别指定View进出使用的动画效果。动画效果定义如下：</p><p><pre>res\anim\push_left_in.xml    </p><p>&lt;?xml version=<font class="Fields">"1.0"</font> encoding=</font><font class="Fields">"utf-8"</font>?&gt;</p><p>&lt;set xmlns:android=<font class="Fields">"http:<font class="Comments">//schemas.android.com/apk/res/android"</font> &gt;</font></p><p>    &lt;translate</p><p>        </font>android:duration=<font class="Fields">"500</p><p>        </font>android:fromXDelta=<font class="Fields">"100%p</p><p>        </font>android:toXDelta=<font class="Fields">"0"</font> /&gt;</p><p>    &lt;alpha</p><p>        </font>android:duration=<font class="Fields">"500</p><p>        </font>android:fromAlpha=<font class="Fields">"0.0</p><p>        </font>android:toAlpha=<font class="Fields">"1.0"</font> /&gt;</p><p>&lt;/set&gt;</p><p></pre></p><p>res\anim\push_left_out.xml  </p><p><pre> </p><p>&lt;?xml version=<font class="Fields">"1.0"</font> encoding=</font><font class="Fields">"utf-8"</font>?&gt;</p><p>&lt;set xmlns:android=<font class="Fields">"http:<font class="Comments">//schemas.android.com/apk/res/android"</font> &gt;</font></p><p>    &lt;translate</p><p>        </font>android:duration=<font class="Fields">"500</p><p>        </font>android:fromXDelta=<font class="Fields">"0</p><p>        </font>android:toXDelta=<font class="Fields">"-100%p"</font> /&gt;</p><p>    &lt;alpha</p><p>        </font>android:duration=<font class="Fields">"500</p><p>        </font>android:fromAlpha=<font class="Fields">"1.0</p><p>        </font>android:toAlpha=<font class="Fields">"0.0"</font> /&gt;</p><p>&lt;/set&gt;  </p><p></pre></p><p>Activity代码如下（src\cc\c\TestActivity.java）：</p><p><pre><font class="keyword">public </font><font class="keyword">class </font>TestActivity </font><font class="keyword">extends </font>Activity {</p><p>	<font class="keyword">private </font>ViewFlipper mViewFlipper;</p><p>	@Override</p><p>	<font class="keyword">public </font><font class="keyword">void </font>onCreate(Bundle savedInstanceState) {</p><p>		<font class="keyword">super</font>.onCreate(savedInstanceState);</p><p>		setContentView(R.layout.main);</p><p>		Button buttonNext1 = (Button) findViewById(R.id.Button_next1);</p><p>		mViewFlipper = (ViewFlipper) findViewById(R.id.flipper);</p><p>		</font>buttonNext1.setOnClickListener(<font class="keyword">new </font>View.OnClickListener() {</p><p>			<font class="keyword">public </font><font class="keyword">void </font>onClick(View view) {</p><p>				<font class="Comments">// 在layout中定义的属性，也可以在代码中指定</font></p><p>				<font class="Comments">// mViewFlipper.setInAnimation(getApplicationContext(),</font></p><p>				<font class="Comments">// R.anim.push_left_in);</font></p><p>				<font class="Comments">// mViewFlipper.setOutAnimation(getApplicationContext(),</font></p><p>				<font class="Comments">// R.anim.push_left_out);</font></p><p>				<font class="Comments">// mViewFlipper.setPersistentDrawingCache(ViewGroup.PERSISTENT_ALL_CACHES);</font></p><p>				<font class="Comments">// mViewFlipper.setFlipInterval(1000);</font></p><p>				mViewFlipper.showNext();</p><p>				<font class="Comments">// 调用下面的函数将会循环显示mViewFlipper内的所有View。</font></p><p>				<font class="Comments">// mViewFlipper.startFlipping();</font></p><p>			}</p><p>		});</p><p>		Button buttonNext2 = (Button) findViewById(R.id.Button_next2);</p><p>		</font>buttonNext2.setOnClickListener(<font class="keyword">new </font>View.OnClickListener() {</p><p>			<font class="keyword">public </font><font class="keyword">void </font>onClick(View view) {</p><p>				mViewFlipper.showNext();</p><p>			}</p><p>		});</p><p>		Button buttonNext3 = (Button) findViewById(R.id.Button_next3);</p><p>		</font>buttonNext3.setOnClickListener(<font class="keyword">new </font>View.OnClickListener() {</p><p>			<font class="keyword">public </font><font class="keyword">void </font>onClick(View view) {</p><p>				mViewFlipper.showNext();</p><p>			}</p><p>		});</p><p>	}</p><p>}  </p><p></pre></p><p>通过手势移动屏幕</p><p>上面是通过屏幕上的按钮来在屏幕间切换的，这看起来多少有点不符合OPhone的风格，如果要是能通过手势的左右滑动来实现屏幕的切换就比较优雅了。 </p><p>通过android.view.GestureDetector类可以检测各种手势事件，该类有两个回调接口分别用来通知具体的事件： </p><p>GestureDetector.OnDoubleTapListener：用来通知DoubleTap事件，类似于鼠标的双击事件，该接口有如下三个回调函数： </p><p>1. onDoubleTap(MotionEvent e)：通知DoubleTap手势， </p><p>2. onDoubleTapEvent(MotionEvent e)：通知DoubleTap手势中的事件，包含down、up和move事件（这里指的是在双击之间发生的事件，例如在同一个地方双击会产生DoubleTap手势，而在DoubleTap手势里面还会发生down和up事件，这两个事件由该函数通知）； </p><p>3. onSingleTapConfirmed(MotionEvent e)：用来判定该次点击是SingleTap而不是DoubleTap，如果连续点击两次就是DoubleTap手势，如果只点击一次，OPhone系统等待一段时间后没有收到第二次点击则判定该次点击为SingleTap而不是DoubleTap，然后触发SingleTapConfirmed事件。 </p><p>GestureDetector.OnGestureListener：用来通知普通的手势事件，该接口有如下六个回调函数：</p><p><pre>onDown(MotionEvent e)：down事件； </p><p>onSingleTapUp(MotionEvent e)：一次点击up事件； </p><p>onShowPress(MotionEvent e)：down事件发生而move或则up还没发生前触发该事件； </p><p>onLongPress(MotionEvent e)：长按事件；</p><p>onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY)：滑动手势事件；</p><p>onScroll(MotionEvent e1, MotionEvent e2, float distanceX, float distanceY)：在屏幕上拖动事件。</p><p></pre></p><p>这些事件有些定义的不太容易理解，在示例项目中实现了所有的回调函数，在每个函数中输出相关的日志，对这些事件不理解的可以运行项目，通过不同的操作来触发事件，然后观看logcat输出日志可有助于对这些事件的理解。 </p><p>在上述事件中，如果在程序中处理的该事件就返回true否则返回false，在GestureDetector中也定义了一个SimpleOnGestureListener类，这是个助手类，实现了上述的所有函数并且都返回false。如果在项目中只需要监听某个事件继承这个类可以少些几个空回调函数。 </p><p>要走上面的程序中添加滑动手势来实现屏幕切换的话，首先需要定义一个GestureDetector：</p><p><pre><font class="keyword">private </font>GestureDetector mGestureDetector;</p><p></pre></p><p>并在onCreate函数中初始化：</p><p><pre>mGestureDetector = <font class="keyword">new </font>GestureDetector(</font><font class="keyword">this</font>);</p><p></pre></p><p>参数是OnGestureListener，然后让TestActivity实现 OnGestureListener 和OnDoubleTapListener接口：</p><p><pre><font class="keyword">class </font>TestActivity </font><font class="keyword">extends </font>Activity </font><font class="keyword">implements </font>OnGestureListener , OnDoubleTapListener</p><p></pre></p><p>然后在onFling函数中实现切换屏幕的功能：</p><p><pre><font class="keyword">public </font><font class="keyword">boolean </font>onFling(MotionEvent e1, MotionEvent e2, </font><font class="keyword">float </font>velocityX,</p><p>		<font class="keyword">float </font>velocityY) {</p><p>	</font>Log.d(tag, <font class="Fields">"...onFling..."</font>);</p><p>	<font class="keyword">if </font>(e1.getX() &gt; e2.getX()) {<font class="Comments">// move to left</font></p><p>		mViewFlipper.showNext();</p><p>	</font>} <font class="keyword">else </font><font class="keyword">if </font>(e1.getX() &lt; e2.getX()) {</p><p>		mViewFlipper.setInAnimation(getApplicationContext(),</p><p>				R.anim.push_right_in);</p><p>		mViewFlipper.setOutAnimation(getApplicationContext(),</p><p>				R.anim.push_right_out);</p><p>		mViewFlipper.showPrevious();</p><p>		mViewFlipper.setInAnimation(getApplicationContext(),</p><p>				R.anim.push_left_in);</p><p>		mViewFlipper.setOutAnimation(getApplicationContext(),</p><p>				R.anim.push_left_out);</p><p>	</font>} <font class="keyword">else </font>{</p><p>		<font class="keyword">return </font><font class="keyword">false</font>;</p><p>	}</p><p>	<font class="keyword">return </font><font class="keyword">true</font>;</p><p>}  </p><p></pre></p><p>这里实现的功能是从右往左滑动则切换到上一个View，从左往右滑动则切换到下一个View，并且使用不同的in、out 动画使切换效果看起来统一一些。</p><p>然后在onDoubleTap中实现双击自动切换的效果，再次双击则停止：</p><p><pre><font class="keyword">public </font><font class="keyword">boolean </font>onDoubleTap(MotionEvent e) {</p><p>	</font>Log.d(tag, <font class="Fields">"...onDoubleTap..."</font>);</p><p>	<font class="keyword">if </font>(mViewFlipper.isFlipping()) {</p><p>		mViewFlipper.stopFlipping();</p><p>	</font>} <font class="keyword">else </font>{</p><p>		mViewFlipper.startFlipping();</p><p>	}</p><p>	<font class="keyword">return </font><font class="keyword">true</font>;</p><p>}  </p><p></pre></p><p>到这里手势代码就完成了，现在可以通过左右滑动切换View并且双击可以自动切换View。细心的读者这里可能会发现一个问题，上面在创建mGestureDetector 的时候使用的是如下代码：</p><p><pre>mGestureDetector = new GestureDetector(this);</p><p></pre></p><p>这里的参数为OnGestureListener，而且GestureDetector有个函数setOnDoubleTapListener来设置OnDoubleTapListener，在上面的代码中并没有设置OnDoubleTapListener，那么onDoubleTap事件是如何调用的呢？这里的玄机就要去探探 GestureDetector(OnGestureListener l)这个构造函数的源代码了：</p><p><pre><font class="keyword">public </font>GestureDetector(OnGestureListener listener) {    </p><p>	<font class="keyword">this</font>(</font><font class="keyword">null</font>, listener, </font><font class="keyword">null</font>);    </p><p>} </p><p></pre></p><p>调用了另外一个构造函数：</p><p><pre><font class="keyword">public </font>GestureDetector(Context context, OnGestureListener listener,</p><p>		Handler handler) {</p><p>	<font class="keyword">if </font>(handler != </font><font class="keyword">null</font>) {</p><p>		</font>mHandler = <font class="keyword">new </font>GestureHandler(handler);</p><p>	</font>} <font class="keyword">else </font>{</p><p>		</font>mHandler = <font class="keyword">new </font>GestureHandler();</p><p>	}</p><p>	mListener = listener;</p><p>	<font class="keyword">if </font>(listener instanceof OnDoubleTapListener) {</p><p>		setOnDoubleTapListener((OnDoubleTapListener) listener);</p><p>	}</p><p>	init(context);</p><p>}  </p><p></pre></p><p>注意到listener instanceof OnDoubleTapListener没有？现在明白了吧。</p><p></p></div>

</DIV></DIV>

<DIV id=footer style="display:none">
<P align="center">  
 
  
   </P>
</DIV></BODY></HTML>

